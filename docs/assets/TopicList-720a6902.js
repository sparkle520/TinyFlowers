import{h as i,_ as xt,j as wt,u as bt,k as yt,l as kt,s as R,a as Lt,o as tt,c as Ct,b as Mt,r as m,n as et,w as Tt,m as st,d as c,e as _,g as t,q as H,v as zt,t as $t,x as I,F as g,y as k,z as d,A as lt,B as o,C as St,p as qt,f as Ht}from"./index-599e8f13.js";const ot=x=>{x?(i("--bg_color","#0b0e14"),i("--topic_list_bg","#0b0e14"),i("--color","#f7f7f7"),i("--item_bg","#242b3dc7"),i("--item_shadow","#1f2d3d26"),i("--title_color","#f7f7f7"),i("--title_af_bg","#a3a7c1aa"),i("--tag_box_bg","#2d3041c7"),i("--tag_bg","#9fa3bc"),i("--topic_classification_color","#5e6d78"),i("--topic_classification_num_color","#b5b9d6")):(i("--bg_color","#f7f3f5"),i("--topic_list_bg","#e8f6f9"),i("--color","#000000"),i("--item_bg","#ffffffc7"),i("--item_shadow","#1f2d3d26"),i("--title_color","#173e6c"),i("--title_af_bg","#22113364"),i("--tag_box_bg","#dae6e7c7"),i("--tag_bg","#41a8a8"),i("--topic_classification_color","#173e6c"),i("--topic_classification_num_color","#e06530"))};const r=x=>(qt("data-v-b403f199"),x=x(),Ht(),x),Vt={id:"topic_list_main",class:"flex flex_direction_column"},Bt={class:"topic_search_box relative"},Dt=["onKeyup"],jt=r(()=>t("label",{class:"search_icon absolute",for:"topic_search"},[t("img",{src:"https://pic.imgdb.cn/item/65b80090871b83018addc8dc.png",alt:""})],-1)),At={class:"filter_search_box absolute"},Et={class:"flex flex_direction_column"},Ft=["onClick"],It={class:"width_full flex flex_direction_row justify_content_center gap_1vw z_index_10"},Ut={class:"topic_box"},Wt={class:"layout_box flex flex_direction_row align_items_center relative"},Kt=r(()=>t("svg",{t:"1707409279938",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13268",width:"22",height:"22"},[t("path",{d:"M192 304a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#404040","p-id":"13269"}),t("path",{d:"M192 528a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z m352 0a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H592a48 48 0 0 1-48-48z",fill:"#F2B71E","p-id":"13270"}),t("path",{d:"M192 752a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#404040","p-id":"13271"})],-1)),Nt=[Kt],Pt=r(()=>t("svg",{t:"1707408621772",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5142",width:"22",height:"22"},[t("path",{d:"M450.56 563.2a10.24 10.24 0 0 1 10.16832 9.04192L460.8 573.44v245.76a10.24 10.24 0 0 1-9.04192 10.16832L450.56 829.44H204.8a10.24 10.24 0 0 1-10.16832-9.04192L194.56 819.2V573.44a10.24 10.24 0 0 1 9.04192-10.16832L204.8 563.2h245.76z m368.64 0a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H573.44a10.24 10.24 0 0 1-10.24-10.24V573.44a10.24 10.24 0 0 1 10.24-10.24z m-378.89024 20.48h-225.28v225.28h225.28V583.68z m368.64 0h-225.28v225.28h225.28V583.68zM450.56 194.56a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H204.8a10.24 10.24 0 0 1-10.24-10.24V204.8a10.24 10.24 0 0 1 10.24-10.24z m368.64 0a10.24 10.24 0 0 1 10.16832 9.04192L829.44 204.8v245.76a10.24 10.24 0 0 1-9.04192 10.16832L819.2 460.8H573.44a10.24 10.24 0 0 1-10.16832-9.04192L563.2 450.56V204.8a10.24 10.24 0 0 1 9.04192-10.16832L573.44 194.56h245.76z m-378.89024 20.48h-225.28v225.28h225.28V215.04z m368.64 0h-225.28v225.28h225.28V215.04z",fill:"#202020","p-id":"5143"})],-1)),Rt=[Pt],Ot=["onClick"],Xt={class:"item_inner_box flex flex_direction_row"},Yt=["src"],Gt={key:1,class:"item_img",src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},Jt={class:"item_content flex flex_direction_column"},Qt={class:"relative title flex flex_direction_row align_items_center"},Zt={class:"item_classification relative"},te=["innerHTML"],ee={class:"date flex flex_direction_row justify_content_center"},se={class:"absolute tag_box flex flex_direction_row"},le={class:"tag"},oe={class:"topic_grid_box flex flex_direction_row"},ie={class:"topic_grid_inner_box margin_0_auto flex flex_direction_row warp"},ne=["onClick"],ae={class:"img_box relative"},ce=["src"],_e={key:1,src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},re={class:"topic_item_inner_grid flex flex_direction_column"},de={class:"flex flex_direction_row align_items_center"},ue={class:"classification_box"},pe={class:"date relative"},fe={class:"topic_title"},he=["innerHTML"],ve={class:"tags_box flex flex_direction_row"},me={class:"tag_item"},ge={class:"personal_box flex flex_direction_column"},xe={class:"personal_item intro flex relative flex_direction_column align_items_center"},we=r(()=>t("img",{class:"avatar_bg absolute",src:"https://pic.imgdb.cn/item/65a9840f871b83018a77d214.jpg",alt:""},null,-1)),be=["src"],ye=["textContent"],ke=["textContent"],Le={class:"width_full flex flex_direction_row"},Ce={class:"topic_classification_total_box flex flex_direction_column align_items_center"},Me=r(()=>t("h3",null,"文章",-1)),Te=["textContent"],ze={class:"topic_classification_total_box flex flex_direction_column align_items_center"},$e=r(()=>t("h3",null,"分类",-1)),Se=["textContent"],qe={class:"personal_item new_topic_box flex flex_direction_column align_items_center"},He=r(()=>t("h3",{class:"l_title relative"},"最新文章",-1)),Ve={class:"flex flex_direction_column"},Be=["onClick"],De={class:"new_topic_date"},je={class:"personal_item classification_box flex flex_direction_column align_items_center"},Ae=r(()=>t("h3",{class:"l_title relative"},"分类",-1)),Ee={class:"flex flex_direction_column"},Fe=r(()=>t("span",null,"学习笔记",-1)),Ie=r(()=>t("span",null,"技术分享",-1)),Ue=r(()=>t("span",null,"生活随想",-1)),We=r(()=>t("span",null,"二次元",-1)),Ke={class:"personal_item site_info_box flex flex_direction_column align_items_center"},Ne=r(()=>t("h3",{class:"l_title relative"},"网站信息",-1)),Pe={class:"flex flex_direction_column"},Re=r(()=>t("li",null,[t("span",null,"网站名称: Tiny Flowers")],-1)),h=10,it="2024-01-05 11:01:01",Oe={__name:"TopicList",setup(x){const{params:U}=wt(),w=bt(),a=yt(),V=kt(),{theme:nt}=R(w),{layout:at}=R(w),{list_layout:W}=R(w),b=Lt();w.$subscribe((e,s)=>{ot(s.theme),Y(s.layout),O(s.list_layout)}),tt(()=>{}),Ct(()=>{ct(),document.addEventListener("click",X)});const O=e=>{const s=document.querySelectorAll(".layout"),n=document.querySelector(".topic_grid_box");e?(s[0].classList.add("layout_active"),s[1].classList.remove("layout_active"),n.style.transform="scale(2) translateX(-20vw)",n.style.opacity=.5):(s[1].classList.add("layout_active"),s[0].classList.remove("layout_active"),n.style.transform="scale(1) translateX(0)",n.style.opacity=1)},X=e=>{document.querySelector(".topic_search_box").contains(e.target)||(T.value=!1)},ct=()=>{window.scrollTo(0,0),Y(at.value),ot(nt.value),O(W.value),y=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",L),L(),Q(it)};let y=[];const Y=e=>{const s=document.querySelector(".topic_box"),n=document.querySelector(".topic_grid_inner_box");e?(s.style.width="60vw",K.value=!0,n.style.width="100%"):(s.style.width="80vw",K.value=!1,n.style.width="92%")},B=[{name:"学习笔记"},{name:"技术分享"},{name:"生活随想"},{name:"二次元"}],L=()=>{for(let e=0;e<y.length;e++){let s=y[e];s.offsetTop-window.innerHeight<=window.scrollY&&(s.style.opacity="1",s.classList.add("item_animation"))}},_t=()=>{for(let e=0;e<y.length;e++){let s=y[e];s.style.opacity="0",s.classList.remove("item_animation")}};Mt(()=>{document.removeEventListener("scroll",L),clearInterval(ut),document.removeEventListener("click",X)}),tt(()=>{G()});const K=m(!0),D=m([]),v=m({total:0,page_size:h,current_index:U.page}),G=()=>{switch(U.classification){case"学习笔记":j(a.study,v.value.current_index);break;case"技术分享":j(a.technique,v.value.current_index);break;case"生活随想":j(a.life,v.value.current_index);break;case"二次元":j(a.acg,v.value.current_index);break}_t(),et(()=>{y=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",L),L()})},j=(e,s)=>{s*h>=e.length?D.value=e.slice(s*h-h):D.value=e.slice((s-1)*h,(s-1)*h+h),v.value.total=Math.ceil(e.length/h)},N=e=>{b.push(e)},rt=e=>{switch(U.classification){case"学习笔记":b.push("/unknownWorldMap/list/学习笔记/"+e);break;case"技术分享":b.push("/unknownWorldMap/list/技术分享/"+e);break;case"生活随想":b.push("/unknownWorldMap/list/生活随想/"+e);break;case"二次元":b.push("/unknownWorldMap/list/二次元/"+e);break}et(()=>{window.scrollTo(0,0),v.value.current_index=e,G()})};let C=[];(()=>{C.push(a.life[0]),C.push(a.study[0]),C.push(a.technique[0]),C.push(a.acg[0])})();const A=e=>{b.push(`/unknownWorldMap/list/${e}/1`)},J=m(""),Q=e=>{let s=new Date(e),p=new Date().getTime()-s.getTime(),l=Math.floor(p/(24*3600*1e3)),f=p%(24*3600*1e3),u=Math.floor(f/(3600*1e3)),z=f%(3600*1e3),$=Math.floor(z/(60*1e3));J.value=`${l}天${u}小时${$}分钟`},dt=()=>{let n=[E(a.life[0].create_date),E(a.study[0].create_date),E(a.technique[0].create_date),E(a.acg[0].create_date)].sort((mt,gt)=>{let S=gt.split("-"),q=mt.split("-");return new Date(S[0],S[1]-1,S[2],S[3],S[4])-new Date(q[0],q[1]-1,q[2],q[3],q[4])})[0].split("-"),p=new Date(n[0],n[1]-1,n[2],n[3],n[4]),f=new Date().getTime()-p.getTime(),u=Math.floor(f/(24*3600*1e3)),z=f%(24*3600*1e3),$=Math.floor(z/(3600*1e3)),ht=z%(3600*1e3),vt=Math.floor(ht/(60*1e3));return u==0&&$<24?$===0?vt+"分钟前":$+"小时前":u+"天前"},E=e=>e.split("?")[0]+"-"+e.split("?")[1]+"-"+e.split("?")[2]+"-"+e.split("?")[3].split(":")[0]+"-"+e.split("?")[3].split(":")[1];let ut=setInterval(()=>{Q(it)},6e4);const F={classification_total:4,new_topic:C,site_info:{name:"Tiny Flowers",run_time:J,last_update:dt()}},pt=e=>{window.event?e.keyCode:e.which},M=m([]),P=m();Tt(P,(e,s)=>{if(e==""){M.value=[],T.value=!1;return}T.value=!0,M.value=[],Z(a.get_all(),0,e)});const Z=(e,s,n)=>{if(s>e.length-1)return;n.toLowerCase();let p=Math.min(10,e.length-s);window.requestAnimationFrame(()=>{for(let l=0;l<p;l++)e[s+l].title.toLowerCase().indexOf(n)==-1&&e[s+l].tags.toLowerCase().indexOf(n)==-1||M.value.push(e[s+l]);Z(e,s+p)})},T=m(!1),ft=()=>{M.value.length!=0&&(T.value=!0)};return(e,s)=>{const n=st("Pagination"),p=st("Utils");return c(),_(g,null,[t("div",Vt,[t("div",Bt,[H(t("input",{id:"topic_search",class:"topic_search","onUpdate:modelValue":s[0]||(s[0]=l=>P.value=l),onFocus:ft,onInput:s[1]||(s[1]=(...l)=>e.filter_search_handle&&e.filter_search_handle(...l)),onKeyup:$t(pt,["enter"]),type:"text",placeholder:"在此键入搜索"},null,40,Dt),[[zt,P.value]]),jt,H(t("div",At,[t("ul",Et,[(c(!0),_(g,null,k(M.value,l=>(c(),_("li",{onClick:f=>N(l.link)},o(l.title),9,Ft))),256))])],512),[[I,T.value]])]),t("div",It,[t("div",Ut,[t("div",Wt,[t("div",{class:"layout",onClick:s[2]||(s[2]=l=>d(w).change_g_list_layout(!0))},Nt),t("div",{class:"layout",onClick:s[3]||(s[3]=l=>d(w).change_g_list_layout(!1))},Rt)]),(c(!0),_(g,null,k(D.value,(l,f)=>H((c(),_("div",{onClick:u=>N(l.link),class:"topic_item flex flex_direction_column relative"},[t("div",Xt,[l.img!=""?(c(),_("img",{key:0,class:"item_img",src:l.img,alt:""},null,8,Yt)):(c(),_("img",Gt)),t("div",Jt,[t("span",Qt,[t("span",Zt,o(l.classification),1),St(o(l.title),1)]),t("span",{class:"short_msg",innerHTML:l.short_message},null,8,te),t("div",ee,o(d(V).name)+" / "+o(l.create_date.split("?")[1].replace(/^0+/,""))+"月"+o(l.create_date.split("?")[2].replace(/^0+/,""))+"日 / "+o(l.create_date.split("?")[0])+" / "+o(l.create_date.split("?")[3]),1)])]),t("div",se,[(c(!0),_(g,null,k(l.tags.split("?"),(u,z)=>(c(),_("span",le,o(u),1))),256))])],8,Ot)),[[I,d(W)]])),256)),t("div",oe,[t("div",ie,[(c(!0),_(g,null,k(D.value,(l,f)=>H((c(),_("div",{onClick:u=>N(l.link),class:"topic_item_grid relative"},[t("div",ae,[l.img!=""?(c(),_("img",{key:0,src:l.img,alt:""},null,8,ce)):(c(),_("img",_e))]),t("div",re,[t("div",de,[t("span",ue,o(l.classification),1),t("span",pe,o(l.create_date.split("?")[0])+"-"+o(l.create_date.split("?")[1])+"-"+o(l.create_date.split("?")[2]),1)]),t("span",fe,o(l.title),1),t("span",{class:"topic_short_msg",innerHTML:l.short_message},null,8,he),t("div",ve,[(c(!0),_(g,null,k(l.tags.split("?"),u=>(c(),_("span",me,o(u),1))),256))])])],8,ne)),[[I,!d(W)]])),256))])]),lt(n,{onPage_change:rt,class:"pagination",data:v.value},null,8,["data"])]),H(t("div",ge,[t("div",xe,[we,t("img",{src:d(V).avatar,class:"z_index_10",alt:""},null,8,be),t("span",{class:"personal_name z_index_10",textContent:o(d(V).name)},null,8,ye),t("span",{class:"personal_signature",textContent:o(d(V).signature)},null,8,ke),t("div",Le,[t("div",Ce,[Me,t("span",{textContent:o(d(a).length())},null,8,Te)]),t("div",ze,[$e,t("span",{textContent:o(F.classification_total)},null,8,Se)])])]),t("div",qe,[He,t("ul",Ve,[(c(!0),_(g,null,k(F.new_topic,l=>(c(),_("li",{onClick:f=>e.$router.push(l.link),class:"flex flex_direction_column",key:l.link},[t("span",null,o(l.title),1),t("span",De,o(l.create_date.split("?")[0])+"-"+o(l.create_date.split("?")[1])+"-"+o(l.create_date.split("?")[2]),1)],8,Be))),128))])]),t("div",je,[Ae,t("ul",Ee,[t("li",{onClick:s[4]||(s[4]=l=>A(B[0].name)),class:"flex flex_direction_row"},[Fe,t("span",null,o(d(a).study.length),1)]),t("li",{onClick:s[5]||(s[5]=l=>A(B[1].name)),class:"flex flex_direction_row"},[Ie,t("span",null,o(d(a).technique.length),1)]),t("li",{onClick:s[6]||(s[6]=l=>A(B[2].name)),class:"flex flex_direction_row"},[Ue,t("span",null,o(d(a).life.length),1)]),t("li",{onClick:s[7]||(s[7]=l=>A(B[3].name)),class:"flex flex_direction_row"},[We,t("span",null,o(d(a).acg.length),1)])])]),t("div",Ke,[Ne,t("ul",Pe,[Re,t("li",null,[t("span",null,"存活时间: "+o(F.site_info.run_time.value),1)]),t("li",null,[t("span",null,"上次更新时间: "+o(F.site_info.last_update),1)])])])],512),[[I,K.value]])])]),lt(p)],64)}}},Ge=xt(Oe,[["__scopeId","data-v-b403f199"]]);export{Ge as default};
