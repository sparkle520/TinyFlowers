import{l,_ as vt,m as gt,u as xt,n as wt,a as bt,s as W,c as yt,o as G,b as kt,d as Lt,q as v,v as J,w as Ct,x as Q,e as n,f as c,g as t,y as H,z as Mt,A as Tt,B as j,F as h,r as g,h as p,C as Z,t as i,k as qt,p as zt,j as St}from"./index-15ae4a89.js";const tt=x=>{x?(l("--bg_color","#0b0e14"),l("--topic_list_bg","#0b0e14"),l("--color","#f7f7f7"),l("--item_bg","#242b3dc7"),l("--item_shadow","#1f2d3d26"),l("--title_color","#f7f7f7"),l("--title_af_bg","#a3a7c1aa"),l("--tag_box_bg","#2d3041c7"),l("--tag_bg","#9fa3bc"),l("--topic_classification_color","#5e6d78"),l("--topic_classification_num_color","#b5b9d6"),l("--filter_search_box_bg","#123"),l("--tag_item_bg","#242b3dc7")):(l("--bg_color","#f7f3f5"),l("--topic_list_bg","#e8f6f9"),l("--color","#000000"),l("--item_bg","#ffffffc7"),l("--item_shadow","#1f2d3d26"),l("--title_color","#173e6c"),l("--title_af_bg","#22113364"),l("--tag_box_bg","#dae6e7c7"),l("--tag_bg","#41a8a8"),l("--topic_classification_color","#173e6c"),l("--topic_classification_num_color","#e06530"),l("--filter_search_box_bg","#ffff"),l("--tag_item_bg","#f5f5f5"))};const r=x=>(zt("data-v-19684110"),x=x(),St(),x),Ht={id:"topic_list_main",class:"flex flex_direction_column"},$t={class:"topic_search_box relative"},Vt=["onKeyup"],Bt=r(()=>t("label",{class:"search_icon absolute",for:"topic_search"},[t("img",{src:"https://pic.imgdb.cn/item/65b80090871b83018addc8dc.png",alt:""})],-1)),Dt={class:"filter_search_box absolute"},jt={class:"flex flex_direction_column"},At=["onClick"],Et=r(()=>t("div",{class:"query_time"},[t("span",{class:"query_text"})],-1)),Ft={class:"width_full flex flex_direction_row justify_content_center gap_1vw z_index_10"},It={class:"topic_box"},Ut={class:"layout_box flex flex_direction_row align_items_center relative"},Wt=r(()=>t("svg",{t:"1707409279938",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13268",width:"22",height:"22"},[t("path",{d:"M192 304a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#404040","p-id":"13269"}),t("path",{d:"M192 528a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z m352 0a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H592a48 48 0 0 1-48-48z",fill:"#F2B71E","p-id":"13270"}),t("path",{d:"M192 752a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#404040","p-id":"13271"})],-1)),Kt=[Wt],Nt=r(()=>t("svg",{t:"1707408621772",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5142",width:"22",height:"22"},[t("path",{d:"M450.56 563.2a10.24 10.24 0 0 1 10.16832 9.04192L460.8 573.44v245.76a10.24 10.24 0 0 1-9.04192 10.16832L450.56 829.44H204.8a10.24 10.24 0 0 1-10.16832-9.04192L194.56 819.2V573.44a10.24 10.24 0 0 1 9.04192-10.16832L204.8 563.2h245.76z m368.64 0a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H573.44a10.24 10.24 0 0 1-10.24-10.24V573.44a10.24 10.24 0 0 1 10.24-10.24z m-378.89024 20.48h-225.28v225.28h225.28V583.68z m368.64 0h-225.28v225.28h225.28V583.68zM450.56 194.56a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H204.8a10.24 10.24 0 0 1-10.24-10.24V204.8a10.24 10.24 0 0 1 10.24-10.24z m368.64 0a10.24 10.24 0 0 1 10.16832 9.04192L829.44 204.8v245.76a10.24 10.24 0 0 1-9.04192 10.16832L819.2 460.8H573.44a10.24 10.24 0 0 1-10.16832-9.04192L563.2 450.56V204.8a10.24 10.24 0 0 1 9.04192-10.16832L573.44 194.56h245.76z m-378.89024 20.48h-225.28v225.28h225.28V215.04z m368.64 0h-225.28v225.28h225.28V215.04z",fill:"#202020","p-id":"5143"})],-1)),Pt=[Nt],Rt=["onClick"],Ot={class:"item_inner_box flex flex_direction_row"},Xt=["src"],Yt={key:1,class:"item_img",src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},Gt={class:"item_content flex flex_direction_column"},Jt={class:"relative title flex flex_direction_row align_items_center"},Qt={class:"item_classification relative"},Zt=["innerHTML"],te={class:"date flex flex_direction_row justify_content_center"},ee={class:"absolute tag_box flex flex_direction_row"},se={class:"tag"},oe={class:"topic_grid_box flex flex_direction_row"},le={class:"topic_grid_inner_box margin_0_auto flex flex_direction_row warp"},ie=["onClick"],ae={class:"img_box relative"},ne=["src"],ce={key:1,src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},_e={class:"topic_item_inner_grid flex flex_direction_column"},re={class:"flex flex_direction_row align_items_center"},de={class:"classification_box"},ue={class:"date relative"},fe={class:"topic_title"},pe=["innerHTML"],he={class:"tags_box flex flex_direction_row"},me={class:"tag_item"},ve={class:"personal_box flex flex_direction_column"},ge={class:"personal_item intro flex relative flex_direction_column align_items_center"},xe=r(()=>t("img",{class:"avatar_bg absolute",src:"https://pic.imgdb.cn/item/65a9840f871b83018a77d214.jpg",alt:""},null,-1)),we=["src"],be=["textContent"],ye=["textContent"],ke={class:"width_full flex flex_direction_row"},Le={class:"topic_classification_total_box flex flex_direction_column align_items_center"},Ce=r(()=>t("h3",null,"文章",-1)),Me=["textContent"],Te={class:"topic_classification_total_box flex flex_direction_column align_items_center"},qe=r(()=>t("h3",null,"分类",-1)),ze=["textContent"],Se={class:"personal_item new_topic_box flex flex_direction_column align_items_center"},He=r(()=>t("h3",{class:"l_title relative"},"最新文章",-1)),$e={class:"flex flex_direction_column"},Ve=["onClick"],Be={class:"new_topic_date"},De={class:"personal_item classification_box flex flex_direction_column align_items_center"},je=r(()=>t("h3",{class:"l_title relative"},"分类",-1)),Ae={class:"flex flex_direction_column"},Ee={class:"personal_item site_info_box flex flex_direction_column align_items_center"},Fe=r(()=>t("h3",{class:"l_title relative"},"网站信息",-1)),Ie={class:"flex flex_direction_column"},Ue=r(()=>t("li",null,[t("span",null,"网站名称: Tiny Flowers")],-1)),m=10,et="2024-01-05 11:01:01",We={__name:"TopicList",setup(x){const{params:$}=gt(),w=xt(),d=wt(),V=bt(),{theme:st}=W(w),{layout:ot}=W(w),{list_layout:A}=W(w),b=yt();w.$subscribe((e,o)=>{tt(o.theme),P(o.layout),K(o.list_layout)}),G(()=>{}),kt(()=>{lt(),document.addEventListener("click",N)});const K=e=>{const o=document.querySelectorAll(".layout"),a=document.querySelector(".topic_grid_box");e?(o[0].classList.add("layout_active"),o[1].classList.remove("layout_active"),a.style.transform="scale(2) translateX(-20vw)",a.style.opacity=.5):(o[1].classList.add("layout_active"),o[0].classList.remove("layout_active"),a.style.transform="scale(1) translateX(0)",a.style.opacity=1)},N=e=>{document.querySelector(".topic_search_box").contains(e.target)||(M.value=!1)},lt=()=>{window.scrollTo(0,0),P(ot.value),tt(st.value),K(A.value),y=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",L),L(),X(et)};let y=[];const P=e=>{const o=document.querySelector(".topic_box"),a=document.querySelector(".topic_grid_inner_box");e?(o.style.width="60vw",E.value=!0,a.style.width="100%"):(o.style.width="80vw",E.value=!1,a.style.width="92%")},L=()=>{for(let e=0;e<y.length;e++){let o=y[e];o.offsetTop-window.innerHeight<=window.scrollY&&(o.style.opacity="1",o.classList.add("item_animation"))}},it=()=>{for(let e=0;e<y.length;e++){let o=y[e];o.style.opacity="0",o.classList.remove("item_animation")}};Lt(()=>{document.removeEventListener("scroll",L),clearInterval(rt),document.removeEventListener("click",N)}),G(()=>{R()});const E=v(!0),k=v(),F=v({total:0,page_size:m,current_index:$.page}),R=()=>{d.select_all_from_classification($.classification),it(),k.value=d.current_data,at(k.value,$.page),J(()=>{y=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",L),L()})},at=(e,o)=>{o*m>=e.length?k.value=e.slice(o*m-m):k.value=e.slice((o-1)*m,(o-1)*m+m),F.value.total=Math.ceil(e.length/m)},I=e=>{b.push(e)},nt=e=>{switch($.classification){case"学习笔记":b.push("/unknownWorldMap/list/学习笔记/"+e);break;case"技术分享":b.push("/unknownWorldMap/list/技术分享/"+e);break;case"生活随想":b.push("/unknownWorldMap/list/生活随想/"+e);break;case"二次元":b.push("/unknownWorldMap/list/二次元/"+e);break}J(()=>{window.scrollTo(0,0),F.value.current_index=e,R()})},ct=e=>{b.push(`/unknownWorldMap/list/${e}/1`)},O=v(""),X=e=>{let o=new Date(e),u=new Date().getTime()-o.getTime(),s=Math.floor(u/(24*3600*1e3)),_=u%(24*3600*1e3),f=Math.floor(_/(3600*1e3)),T=_%(3600*1e3),q=Math.floor(T/(60*1e3));O.value=`${s}天${f}小时${q}分钟`},_t=()=>{let a=[B(d.data[0].create_date),B(d.data[1].create_date),B(d.data[2].create_date),B(d.data[3].create_date)].sort((ht,mt)=>{let z=mt.split("-"),S=ht.split("-");return new Date(z[0],z[1]-1,z[2],z[3],z[4])-new Date(S[0],S[1]-1,S[2],S[3],S[4])})[0].split("-"),u=new Date(a[0],a[1]-1,a[2],a[3],a[4]),_=new Date().getTime()-u.getTime(),f=Math.floor(_/(24*3600*1e3)),T=_%(24*3600*1e3),q=Math.floor(T/(3600*1e3)),ft=T%(3600*1e3),pt=Math.floor(ft/(60*1e3));return f==0&&q<24?q===0?pt+"分钟前":q+"小时前":f+"天前"},B=e=>e.split("?")[0]+"-"+e.split("?")[1]+"-"+e.split("?")[2]+"-"+e.split("?")[3].split(":")[0]+"-"+e.split("?")[3].split(":")[1];let rt=setInterval(()=>{X(et)},6e4);const D={classification_total:4,new_topic:d.data.slice(0,4),site_info:{name:"Tiny Flowers",run_time:O,last_update:_t()}},dt=e=>{window.event?e.keyCode:e.which},C=v([]),U=v();Ct(U,(e,o)=>{if(e==""){C.value=[],M.value=!1;return}M.value=!0,C.value=[];const a=performance.now();Y(d.get_all(),0,e);const s=performance.now()-a,_=document.querySelector(".query_text");_.innerHTML="查询耗时: "+s+"ms"});const Y=(e,o,a)=>{if(o>e.length-1)return;a.toLowerCase();let u=Math.min(10,e.length-o);window.requestAnimationFrame(()=>{for(let s=0;s<u;s++)e[o+s].title.toLowerCase().indexOf(a)==-1&&e[o+s].tags.toLowerCase().indexOf(a)==-1||C.value.push(e[o+s]);Y(e,o+u)})},M=v(!1),ut=()=>{C.value.length!=0&&(M.value=!0)};return(e,o)=>{const a=Q("Pagination"),u=Q("Utils");return n(),c(h,null,[t("div",Ht,[t("div",$t,[H(t("input",{id:"topic_search",class:"topic_search","onUpdate:modelValue":o[0]||(o[0]=s=>U.value=s),onFocus:ut,onInput:o[1]||(o[1]=(...s)=>e.filter_search_handle&&e.filter_search_handle(...s)),onKeyup:Tt(dt,["enter"]),type:"text",placeholder:"在此键入搜索"},null,40,Vt),[[Mt,U.value]]),Bt,H(t("div",Dt,[t("ul",jt,[(n(!0),c(h,null,g(C.value,s=>(n(),c("li",{onClick:_=>I(s.link)},i(s.title),9,At))),256))]),Et],512),[[j,M.value]])]),t("div",Ft,[t("div",It,[t("div",Ut,[t("div",{class:"layout",onClick:o[2]||(o[2]=s=>p(w).change_g_list_layout(!0))},Kt),t("div",{class:"layout",onClick:o[3]||(o[3]=s=>p(w).change_g_list_layout(!1))},Pt)]),(n(!0),c(h,null,g(k.value,(s,_)=>H((n(),c("div",{onClick:f=>I(s.link),class:"topic_item flex flex_direction_column relative"},[t("div",Ot,[s.img!=""?(n(),c("img",{key:0,class:"item_img",src:s.img,alt:""},null,8,Xt)):(n(),c("img",Yt)),t("div",Gt,[t("span",Jt,[t("span",Qt,i(s.classification),1),qt(i(s.title),1)]),t("span",{class:"short_msg",innerHTML:s.short_message},null,8,Zt),t("div",te,i(p(V).name)+" / "+i(s.create_date.split("?")[1].replace(/^0+/,""))+"月"+i(s.create_date.split("?")[2].replace(/^0+/,""))+"日 / "+i(s.create_date.split("?")[0])+" / "+i(s.create_date.split("?")[3]),1)])]),t("div",ee,[(n(!0),c(h,null,g(s.tags.split("?"),(f,T)=>(n(),c("span",se,i(f),1))),256))])],8,Rt)),[[j,p(A)]])),256)),t("div",oe,[t("div",le,[(n(!0),c(h,null,g(k.value,(s,_)=>H((n(),c("div",{onClick:f=>I(s.link),class:"topic_item_grid relative"},[t("div",ae,[s.img!=""?(n(),c("img",{key:0,src:s.img,alt:""},null,8,ne)):(n(),c("img",ce))]),t("div",_e,[t("div",re,[t("span",de,i(s.classification),1),t("span",ue,i(s.create_date.split("?")[0])+"-"+i(s.create_date.split("?")[1])+"-"+i(s.create_date.split("?")[2]),1)]),t("span",fe,i(s.title),1),t("span",{class:"topic_short_msg",innerHTML:s.short_message},null,8,pe),t("div",he,[(n(!0),c(h,null,g(s.tags.split("?"),f=>(n(),c("span",me,i(f),1))),256))])])],8,ie)),[[j,!p(A)]])),256))])]),Z(a,{onPage_change:nt,class:"pagination",data:F.value},null,8,["data"])]),H(t("div",ve,[t("div",ge,[xe,t("img",{src:p(V).avatar,class:"z_index_10",alt:""},null,8,we),t("span",{class:"personal_name z_index_10",textContent:i(p(V).name)},null,8,be),t("span",{class:"personal_signature",textContent:i(p(V).signature)},null,8,ye),t("div",ke,[t("div",Le,[Ce,t("span",{textContent:i(p(d).length())},null,8,Me)]),t("div",Te,[qe,t("span",{textContent:i(D.classification_total)},null,8,ze)])])]),t("div",Se,[He,t("ul",$e,[(n(!0),c(h,null,g(D.new_topic,s=>(n(),c("li",{onClick:_=>e.$router.push(s.link),class:"flex flex_direction_column",key:s.link},[t("span",null,i(s.title),1),t("span",Be,i(s.create_date.split("?")[0])+"-"+i(s.create_date.split("?")[1])+"-"+i(s.create_date.split("?")[2]),1)],8,Ve))),128))])]),t("div",De,[je,t("ul",Ae,[(n(!0),c(h,null,g(p(d).classification,s=>(n(),c("li",{onClick:o[4]||(o[4]=_=>ct()),class:"flex flex_direction_row"},[t("span",null,i(s),1)]))),256))])]),t("div",Ee,[Fe,t("ul",Ie,[Ue,t("li",null,[t("span",null,"存活时间: "+i(D.site_info.run_time.value),1)]),t("li",null,[t("span",null,"上次更新时间: "+i(D.site_info.last_update),1)])])])],512),[[j,E.value]])])]),Z(u)],64)}}},Ne=vt(We,[["__scopeId","data-v-19684110"]]);export{Ne as default};
