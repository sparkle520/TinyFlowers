import{h as n,_ as ve,k as xe,u as ge,l as we,m as be,s as J,a as ye,o as Q,c as ke,b as Ce,n as v,q as X,w as Te,v as Z,d as _,e as r,g as e,x as N,y as Me,z as Le,A as ee,F as S,r as z,B as te,C as u,t as o,D as $e,i as Se,p as qe,f as De}from"./index-8b5e0a44.js";const se=x=>{x?(n("--bg_color","#0b0e14"),n("--color","#f7f7f7"),n("--item_bg","#242b3dc7"),n("--item_shadow","#1f2d3d26"),n("--title_color","#f7f7f7"),n("--title_af_bg","#a3a7c1aa"),n("--tag_box_bg","#2d3041c7"),n("--tag_bg","#9fa3bc"),n("--topic_classification_color","#5e6d78"),n("--topic_classification_num_color","#b5b9d6")):(n("--bg_color","#f7f3f5"),n("--color","#000000"),n("--item_bg","#ffffffc7"),n("--item_shadow","#1f2d3d26"),n("--title_color","#173e6c"),n("--title_af_bg","#22113364"),n("--tag_box_bg","#dae6e7c7"),n("--tag_bg","#41a8a8"),n("--topic_classification_color","#173e6c"),n("--topic_classification_num_color","#e06530"))};const c=x=>(qe("data-v-94f0f7d9"),x=x(),De(),x),Ie={id:"topic_list_main",class:"flex flex_direction_column"},Ae={class:"topic_search_box relative"},Ee=["onKeyup"],Fe=c(()=>e("label",{class:"search_icon absolute",for:"topic_search"},[e("img",{src:"https://pic.imgdb.cn/item/65b80090871b83018addc8dc.png",alt:""})],-1)),ze={class:"filter_search_box absolute"},Be={class:"flex flex_direction_column"},Ue=["onClick"],Ve={class:"width_full flex flex_direction_row justify_content_center gap_1vw z_index_10"},We={class:"topic_box"},je=["onClick"],Ne={class:"item_inner_box flex flex_direction_row"},He=["src"],Ke={class:"item_content flex flex_direction_column"},Pe={class:"relative title flex flex_direction_row align_items_center"},Re={class:"item_classification relative"},Oe=["innerHTML"],Ye={class:"date flex flex_direction_row justify_content_center"},Ge={class:"absolute tag_box flex flex_direction_row"},Je={class:"tag"},Qe={class:"personal_box flex flex_direction_column"},Xe={class:"personal_item intro flex relative flex_direction_column align_items_center"},Ze=c(()=>e("img",{class:"avatar_bg absolute",src:"https://pic.imgdb.cn/item/65a9840f871b83018a77d214.jpg",alt:""},null,-1)),et=["src"],tt=["textContent"],st=["textContent"],lt={class:"width_full flex flex_direction_row"},ot={class:"topic_classification_total_box flex flex_direction_column align_items_center"},nt=c(()=>e("h3",null,"文章",-1)),it=["textContent"],at={class:"topic_classification_total_box flex flex_direction_column align_items_center"},ct=c(()=>e("h3",null,"分类",-1)),_t=["textContent"],rt={class:"personal_item new_topic_box flex flex_direction_column align_items_center"},dt=c(()=>e("h3",{class:"l_title relative"},"最新文章",-1)),ut={class:"flex flex_direction_column"},ft=["onClick"],pt={class:"new_topic_date"},ht={class:"personal_item classification_box flex flex_direction_column align_items_center"},mt=c(()=>e("h3",{class:"l_title relative"},"分类",-1)),vt={class:"flex flex_direction_column"},xt=c(()=>e("span",null,"学习笔记",-1)),gt=c(()=>e("span",null,"技术分享",-1)),wt=c(()=>e("span",null,"生活随想",-1)),bt=c(()=>e("span",null,"二次元",-1)),yt={class:"personal_item site_info_box flex flex_direction_column align_items_center"},kt=c(()=>e("h3",{class:"l_title relative"},"网站信息",-1)),Ct={class:"flex flex_direction_column"},Tt=c(()=>e("li",null,[e("span",null,"网站名称: Tiny Flowers")],-1)),p=10,le="2024-01-05 11:01:01",Mt={__name:"TopicList",setup(x){const{params:B}=xe(),U=ge(),i=we(),q=be(),{theme:oe}=J(U),{layout:ne}=J(U),g=ye();U.$subscribe((t,s)=>{se(s.theme),K(s.layout)}),Q(()=>{}),ke(()=>{ie(),document.addEventListener("click",H)});const H=t=>{document.querySelector(".topic_search_box").contains(t.target)||(C.value=!1)},ie=()=>{window.scrollTo(0,0),K(ne.value),se(oe.value),w=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",b),b(),Y(le)};let w=[];const K=t=>{const s=document.querySelector(".topic_box");t?(s.style.width="60vw",V.value=!0):(s.style.width="80vw",V.value=!1)},D=[{name:"学习笔记"},{name:"技术分享"},{name:"生活随想"},{name:"二次元"}],b=()=>{for(let t=0;t<w.length;t++){let s=w[t];s.offsetTop-window.innerHeight<=window.scrollY&&(s.style.opacity="1",s.classList.add("item_animation"))}},ae=()=>{for(let t=0;t<w.length;t++){let s=w[t];s.style.opacity="0",s.classList.remove("item_animation")}};Ce(()=>{document.removeEventListener("scroll",b),clearInterval(re),document.removeEventListener("click",H)}),Q(()=>{P()});const V=v(!0),W=v([]),h=v({total:0,page_size:p,current_index:B.page}),P=()=>{switch(B.classification){case"学习笔记":I(i.study,h.value.current_index);break;case"技术分享":I(i.technique,h.value.current_index);break;case"生活随想":I(i.life,h.value.current_index);break;case"二次元":I(i.acg,h.value.current_index);break}ae(),X(()=>{w=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",b),b()})},I=(t,s)=>{s*p>=t.length?W.value=t.slice(s*p-p):W.value=t.slice((s-1)*p,(s-1)*p+p),h.value.total=Math.ceil(t.length/p)},R=t=>{g.push(t)},ce=t=>{switch(B.classification){case"学习笔记":g.push("/unknownWorldMap/list/学习笔记/"+t);break;case"技术分享":g.push("/unknownWorldMap/list/技术分享/"+t);break;case"生活随想":g.push("/unknownWorldMap/list/生活随想/"+t);break;case"二次元":g.push("/unknownWorldMap/list/二次元/"+t);break}X(()=>{window.scrollTo(0,0),h.value.current_index=t,P()})};let y=[];(()=>{y.push(i.life[0]),y.push(i.study[0]),y.push(i.technique[0]),y.push(i.acg[0])})();const A=t=>{g.push(`/unknownWorldMap/list/${t}/1`)},O=v(""),Y=t=>{let s=new Date(t),d=new Date().getTime()-s.getTime(),l=Math.floor(d/(24*3600*1e3)),f=d%(24*3600*1e3),m=Math.floor(f/(3600*1e3)),T=f%(3600*1e3),M=Math.floor(T/(60*1e3));O.value=`${l}天${m}小时${M}分钟`},_e=()=>{let a=[E(i.life[0].create_date),E(i.study[0].create_date),E(i.technique[0].create_date),E(i.acg[0].create_date)].sort((he,me)=>{let L=me.split("-"),$=he.split("-");return new Date(L[0],L[1]-1,L[2],L[3],L[4])-new Date($[0],$[1]-1,$[2],$[3],$[4])})[0].split("-"),d=new Date(a[0],a[1]-1,a[2],a[3],a[4]),f=new Date().getTime()-d.getTime(),m=Math.floor(f/(24*3600*1e3)),T=f%(24*3600*1e3),M=Math.floor(T/(3600*1e3)),fe=T%(3600*1e3),pe=Math.floor(fe/(60*1e3));return m==0&&M<24?M===0?pe+"分钟前":M+"小时前":m+"天前"},E=t=>t.split("?")[0]+"-"+t.split("?")[1]+"-"+t.split("?")[2]+"-"+t.split("?")[3].split(":")[0]+"-"+t.split("?")[3].split(":")[1];let re=setInterval(()=>{Y(le)},6e4);const F={classification_total:4,new_topic:y,site_info:{name:"Tiny Flowers",run_time:O,last_update:_e()}},de=t=>{window.event?t.keyCode:t.which},k=v([]),j=v();Te(j,(t,s)=>{if(t==""){k.value=[],C.value=!1;return}C.value=!0,k.value=[],G(i.get_all(),0,t)});const G=(t,s,a)=>{if(s>t.length-1)return;a.toLowerCase();let d=Math.min(10,t.length-s);window.requestAnimationFrame(()=>{for(let l=0;l<d;l++)t[s+l].title.toLowerCase().indexOf(a)==-1&&t[s+l].tags.toLowerCase().indexOf(a)==-1||k.value.push(t[s+l]);G(t,s+d)})},C=v(!1),ue=()=>{k.value.length!=0&&(C.value=!0)};return(t,s)=>{const a=Z("Pagination"),d=Z("Utils");return _(),r(S,null,[e("div",Ie,[e("div",Ae,[N(e("input",{id:"topic_search",class:"topic_search","onUpdate:modelValue":s[0]||(s[0]=l=>j.value=l),onFocus:ue,onInput:s[1]||(s[1]=(...l)=>t.filter_search_handle&&t.filter_search_handle(...l)),onKeyup:Le(de,["enter"]),type:"text",placeholder:"在此键入搜索"},null,40,Ee),[[Me,j.value]]),Fe,N(e("div",ze,[e("ul",Be,[(_(!0),r(S,null,z(k.value,l=>(_(),r("li",{onClick:f=>R(l.link)},o(l.title),9,Ue))),256))])],512),[[ee,C.value]])]),e("div",Ve,[e("div",We,[(_(!0),r(S,null,z(W.value,(l,f)=>(_(),r("div",{onClick:m=>R(l.link),class:"topic_item flex flex_direction_column relative"},[e("div",Ne,[l.img!=""?(_(),r("img",{key:0,class:"item_img",src:l.img,alt:""},null,8,He)):$e("",!0),e("div",Ke,[e("span",Pe,[e("span",Re,o(l.classification),1),Se(o(l.title),1)]),e("span",{class:"short_msg",innerHTML:l.short_message},null,8,Oe),e("div",Ye,o(u(q).name)+" / "+o(l.create_date.split("?")[1].replace(/^0+/,""))+"月"+o(l.create_date.split("?")[2].replace(/^0+/,""))+"日 / "+o(l.create_date.split("?")[0])+" / "+o(l.create_date.split("?")[3]),1)])]),e("div",Ge,[(_(!0),r(S,null,z(l.tags.split("?"),(m,T)=>(_(),r("span",Je,o(m),1))),256))])],8,je))),256)),te(a,{onPage_change:ce,class:"pagination",data:h.value},null,8,["data"])]),N(e("div",Qe,[e("div",Xe,[Ze,e("img",{src:u(q).avatar,class:"z_index_10",alt:""},null,8,et),e("span",{class:"personal_name z_index_10",textContent:o(u(q).name)},null,8,tt),e("span",{class:"personal_signature",textContent:o(u(q).signature)},null,8,st),e("div",lt,[e("div",ot,[nt,e("span",{textContent:o(u(i).length())},null,8,it)]),e("div",at,[ct,e("span",{textContent:o(F.classification_total)},null,8,_t)])])]),e("div",rt,[dt,e("ul",ut,[(_(!0),r(S,null,z(F.new_topic,l=>(_(),r("li",{onClick:f=>t.$router.push(l.link),class:"flex flex_direction_column",key:l.link},[e("span",null,o(l.title),1),e("span",pt,o(l.create_date.split("?")[0])+"-"+o(l.create_date.split("?")[1])+"-"+o(l.create_date.split("?")[2]),1)],8,ft))),128))])]),e("div",ht,[mt,e("ul",vt,[e("li",{onClick:s[2]||(s[2]=l=>A(D[0].name)),class:"flex flex_direction_row"},[xt,e("span",null,o(u(i).study.length),1)]),e("li",{onClick:s[3]||(s[3]=l=>A(D[1].name)),class:"flex flex_direction_row"},[gt,e("span",null,o(u(i).technique.length),1)]),e("li",{onClick:s[4]||(s[4]=l=>A(D[2].name)),class:"flex flex_direction_row"},[wt,e("span",null,o(u(i).life.length),1)]),e("li",{onClick:s[5]||(s[5]=l=>A(D[3].name)),class:"flex flex_direction_row"},[bt,e("span",null,o(u(i).acg.length),1)])])]),e("div",yt,[kt,e("ul",Ct,[Tt,e("li",null,[e("span",null,"存活时间: "+o(F.site_info.run_time.value),1)]),e("li",null,[e("span",null,"上次更新时间: "+o(F.site_info.last_update),1)])])])],512),[[ee,V.value]])])]),te(d)],64)}}},St=ve(Mt,[["__scopeId","data-v-94f0f7d9"]]);export{St as default};
