import{l,_ as mt,m as gt,u as xt,J as wt,a as bt,s as K,c as yt,o as G,b as Lt,d as kt,n as v,E as Q,w as Ct,q as W,e as n,f as _,g as t,v as H,x as zt,y as Mt,z as j,F as h,r as m,h as f,A as X,t as i,k as Tt,p as qt,j as Ht}from"./index-17ac3471.js";const Z=x=>{x?(l("--bg_color","#0b0e14"),l("--topic_list_bg","#0b0e14"),l("--color","#f7f7f7"),l("--item_bg","#242b3dc7"),l("--item_shadow","#1f2d3d26"),l("--title_color","#f7f7f7"),l("--title_af_bg","#a3a7c1aa"),l("--tag_box_bg","#2d3041c7"),l("--tag_bg","#9fa3bc"),l("--topic_classification_color","#5e6d78"),l("--topic_classification_num_color","#b5b9d6"),l("--filter_search_box_bg","#123"),l("--tag_item_bg","#242b3dc7"),l("--layout_hover","#2d3041c7")):(l("--bg_color","#fdfbfb"),l("--topic_list_bg","#e8f6f9"),l("--color","#000000"),l("--item_bg","#ffffffc7"),l("--item_shadow","#1f2d3d26"),l("--title_color","#4d4949"),l("--title_af_bg","#22113364"),l("--tag_box_bg","#e9696933"),l("--tag_bg","#e96969"),l("--topic_classification_color","#e96969"),l("--topic_classification_num_color","#e96969"),l("--filter_search_box_bg","#ffff"),l("--tag_item_bg","#f5f5f5"),l("--layout_hover","#F3ACAC"))};const d=x=>(qt("data-v-decab140"),x=x(),Ht(),x),St={id:"topic_list_main",class:"flex flex_direction_column relative"},Vt={class:"topic_search_box relative"},$t=["onKeyup"],At=d(()=>t("label",{class:"search_icon absolute",for:"topic_search"},[t("svg",{t:"1709027338854",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9410",width:"72",height:"72"},[t("path",{d:"M549.660444 56.888889a30.72 30.72 0 0 1 21.617778 8.988444l205.425778 205.482667c5.688889 5.688889 8.988444 13.425778 8.988444 21.560889v271.132444a244.337778 244.337778 0 0 0-316.245333 347.989334H144.327111A30.492444 30.492444 0 0 1 113.777778 881.493333V87.438222C113.777778 70.542222 127.431111 56.888889 144.327111 56.888889h405.333333zM387.811556 477.013333H212.195556a7.623111 7.623111 0 0 0-7.623112 7.68v45.795556c0 4.209778 3.413333 7.623111 7.623112 7.623111h175.616c4.209778 0 7.623111-3.413333 7.623111-7.623111V484.693333a7.623111 7.623111 0 0 0-7.623111-7.68z m190.862222-129.763555H212.195556a7.623111 7.623111 0 0 0-7.623112 7.623111v45.795555c0 4.209778 3.413333 7.623111 7.623112 7.623112h366.478222c4.209778 0 7.623111-3.413333 7.623111-7.623112v-45.795555a7.623111 7.623111 0 0 0-7.623111-7.623111z m-43.064889-219.932445v179.598223h179.655111L535.608889 127.317333z m372.394667 832.398223l-89.031112-89.031112a167.992889 167.992889 0 1 0-41.585777 38.912l90.339555 90.453334a7.395556 7.395556 0 0 0 5.347556 2.161778 7.68 7.68 0 0 0 5.347555-2.218667l29.582223-29.582222a7.566222 7.566222 0 0 0 0-10.695111z m-223.004445-83.512889a106.837333 106.837333 0 1 1 0-213.788445 106.837333 106.837333 0 1 1 0 213.788445z",fill:"#98fb98","p-id":"9411"})])],-1)),Dt={class:"filter_search_box absolute"},jt={class:"flex flex_direction_column"},Bt=["onClick"],Et=d(()=>t("div",{class:"query_time"},[t("span",{class:"query_text"})],-1)),Ft={class:"width_full flex flex_direction_row justify_content_center gap_1vw z_index_10"},It={class:"topic_box"},Ut={class:"layout_box flex flex_direction_row align_items_center relative"},Kt=d(()=>t("svg",{t:"1707409279938",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13268",width:"22",height:"22"},[t("path",{d:"M192 304a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#e96969","p-id":"13269"}),t("path",{d:"M192 528a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z m352 0a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H592a48 48 0 0 1-48-48z",fill:"#e96969","p-id":"13270"}),t("path",{d:"M192 752a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#e96969","p-id":"13271"})],-1)),Nt=[Kt],Rt=d(()=>t("svg",{t:"1707408621772",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5142",width:"22",height:"22"},[t("path",{d:"M450.56 563.2a10.24 10.24 0 0 1 10.16832 9.04192L460.8 573.44v245.76a10.24 10.24 0 0 1-9.04192 10.16832L450.56 829.44H204.8a10.24 10.24 0 0 1-10.16832-9.04192L194.56 819.2V573.44a10.24 10.24 0 0 1 9.04192-10.16832L204.8 563.2h245.76z m368.64 0a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H573.44a10.24 10.24 0 0 1-10.24-10.24V573.44a10.24 10.24 0 0 1 10.24-10.24z m-378.89024 20.48h-225.28v225.28h225.28V583.68z m368.64 0h-225.28v225.28h225.28V583.68zM450.56 194.56a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H204.8a10.24 10.24 0 0 1-10.24-10.24V204.8a10.24 10.24 0 0 1 10.24-10.24z m368.64 0a10.24 10.24 0 0 1 10.16832 9.04192L829.44 204.8v245.76a10.24 10.24 0 0 1-9.04192 10.16832L819.2 460.8H573.44a10.24 10.24 0 0 1-10.16832-9.04192L563.2 450.56V204.8a10.24 10.24 0 0 1 9.04192-10.16832L573.44 194.56h245.76z m-378.89024 20.48h-225.28v225.28h225.28V215.04z m368.64 0h-225.28v225.28h225.28V215.04z",fill:"#e96969","p-id":"5143"})],-1)),Yt=[Rt],Ot=["onClick"],Pt={class:"item_inner_box flex flex_direction_row"},Jt=["src"],Gt={key:1,class:"item_img",src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},Qt={class:"item_content flex flex_direction_column"},Wt={class:"relative title flex flex_direction_row align_items_center"},Xt={class:"item_classification relative"},Zt=["innerHTML"],te={class:"date flex flex_direction_row justify_content_center"},ee={class:"absolute tag_box flex flex_direction_row"},se={class:"tag"},oe={class:"topic_grid_box flex flex_direction_row"},le={class:"topic_grid_inner_box margin_0_auto flex flex_direction_row warp"},ie=["onClick"],ae={class:"img_box relative"},ne=["src"],_e={key:1,src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},ce={class:"topic_item_inner_grid flex flex_direction_column"},re={class:"flex flex_direction_row align_items_center"},de={class:"classification_box"},ue={class:"date relative"},fe={class:"topic_title"},he=["innerHTML"],pe={class:"tags_box flex flex_direction_row"},ve={class:"tag_item"},me={class:"personal_box flex flex_direction_column"},ge={class:"personal_item intro flex relative flex_direction_column align_items_center"},xe=d(()=>t("img",{class:"avatar_bg absolute",src:"https://pic.imgdb.cn/item/65a9840f871b83018a77d214.jpg",alt:""},null,-1)),we=["src"],be=["textContent"],ye=["textContent"],Le={class:"width_full flex flex_direction_row"},ke={class:"topic_classification_total_box flex flex_direction_column align_items_center"},Ce=d(()=>t("h3",null,"文章",-1)),ze=["textContent"],Me={class:"topic_classification_total_box flex flex_direction_column align_items_center"},Te=d(()=>t("h3",null,"分类",-1)),qe=["textContent"],He={class:"personal_item new_topic_box flex flex_direction_column align_items_center"},Se=d(()=>t("h3",{class:"l_title relative"},"最新文章",-1)),Ve={class:"flex flex_direction_column"},$e=["onClick"],Ae={class:"new_topic_date"},De={class:"personal_item classification_box flex flex_direction_column align_items_center"},je=d(()=>t("h3",{class:"l_title relative"},"分类",-1)),Be={class:"flex flex_direction_column"},Ee=["onClick"],Fe={class:"personal_item site_info_box flex flex_direction_column align_items_center"},Ie=d(()=>t("h3",{class:"l_title relative"},"网站信息",-1)),Ue={class:"flex flex_direction_column"},Ke=d(()=>t("li",null,[t("span",null,"网站名称: Tiny Flowers")],-1)),g=12,tt="2024-01-05 11:01:01",Ne={__name:"TopicList",setup(x){const{params:S}=gt(),w=xt(),p=wt(),V=bt(),{theme:et}=K(w),{layout:st}=K(w),{list_layout:B}=K(w),E=yt();w.$subscribe((e,o)=>{Z(o.theme),Y(o.layout),N(o.list_layout)}),G(()=>{}),Lt(()=>{ot(),document.addEventListener("click",R)});const N=e=>{const o=document.querySelectorAll(".layout"),a=document.querySelector(".topic_grid_box");e?(o[0].classList.add("layout_active"),o[1].classList.remove("layout_active"),a.style.transform="translateY(-20vw)",a.style.opacity=.5):(o[1].classList.add("layout_active"),o[0].classList.remove("layout_active"),a.style.transform=" translateY(0)",a.style.opacity=1)},R=e=>{document.querySelector(".topic_search_box").contains(e.target)||(C.value=!1)},ot=()=>{window.scrollTo(0,0),Y(st.value),Z(et.value),N(B.value),b=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",L),L(),P(tt)};let b=[];const Y=e=>{const o=document.querySelector(".topic_box"),a=document.querySelector(".topic_grid_inner_box");e?(o.style.width="60vw",F.value=!0,a.style.width="100%"):(o.style.width="80vw",F.value=!1,a.style.width="92%")},L=()=>{for(let e=0;e<b.length;e++){let o=b[e];o.offsetTop-window.innerHeight<=window.scrollY&&(o.style.opacity="1",o.classList.add("item_animation"))}},lt=()=>{for(let e=0;e<b.length;e++){let o=b[e];o.style.opacity="0",o.classList.remove("item_animation")}};kt(()=>{document.removeEventListener("scroll",L),clearInterval(dt),document.removeEventListener("click",R)}),G(()=>{it()});const F=v(!0),y=v(),k=v({total:0,page_size:g,current_index:S.page}),it=()=>{p.select_all_from_classification(S.classification),lt(),y.value=p.current_data,at(y.value,S.page),Q(()=>{b=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",L),L()})},at=(e,o)=>{o*g>=e.length?y.value=e.slice(o*g-g):y.value=e.slice((o-1)*g,(o-1)*g+g),k.value.total=e.length},I=e=>{E.push(e)},nt=e=>{E.push(`/article/list/${S.classification}/`+e),Q(()=>{window.scrollTo(0,0),k.value.current_index=e})},_t=e=>{E.push(`/article/list/${e}/1`)},O=v(""),P=e=>{let o=new Date(e),r=new Date().getTime()-o.getTime(),s=Math.floor(r/(24*3600*1e3)),c=r%(24*3600*1e3),u=Math.floor(c/(3600*1e3)),z=c%(3600*1e3),M=Math.floor(z/(60*1e3));O.value=`${s}天${u}小时${M}分钟`},ct=()=>{let e=[];e=p.data.slice(0,4).map(U=>rt(U.create_date));let a=e.sort((U,vt)=>{let T=vt.split("-"),q=U.split("-");return new Date(T[0],T[1]-1,T[2],T[3],T[4])-new Date(q[0],q[1]-1,q[2],q[3],q[4])})[0].split("-"),r=new Date(a[0],a[1]-1,a[2],a[3],a[4]),c=new Date().getTime()-r.getTime(),u=Math.floor(c/(24*3600*1e3)),z=c%(24*3600*1e3),M=Math.floor(z/(3600*1e3)),ht=z%(3600*1e3),pt=Math.floor(ht/(60*1e3));return u==0&&M<24?M===0?pt+"分钟前":M+"小时前":u+"天前"},rt=e=>e.split("?")[0]+"-"+e.split("?")[1]+"-"+e.split("?")[2]+"-"+e.split("?")[3].split(":")[0]+"-"+e.split("?")[3].split(":")[1];let dt=setInterval(()=>{P(tt)},6e4);const $={classification_total:4,new_topic:p.data.slice(0,4),site_info:{name:"Tiny Flowers",run_time:O,last_update:ct()}},ut=e=>{window.event?e.keyCode:e.which},A=v([]),D=v();Ct(D,(e,o)=>{if(e==""){A.value=[],C.value=!1;return}C.value=!0,A.value=[];const a=performance.now();J(p.get_all(),0,e);const r=performance.now(),s=document.querySelector(".query_text"),c=r-a;s.innerHTML="查询耗时: "+c+"ms"});const J=(e,o,a)=>{if(o>e.length-1)return;a.toLowerCase();let r=Math.min(10,e.length-o);window.requestAnimationFrame(()=>{for(let s=0;s<r;s++)e[o+s].title.toLowerCase().indexOf(a)==-1&&e[o+s].tags.toLowerCase().indexOf(a)==-1||A.value.push(e[o+s]);J(e,o+r,a)})},C=v(!1),ft=()=>{D.value.length!=0&&(C.value=!0)};return(e,o)=>{const a=W("Pagination"),r=W("Utils");return n(),_(h,null,[t("div",St,[t("div",Vt,[H(t("input",{id:"topic_search",class:"topic_search","onUpdate:modelValue":o[0]||(o[0]=s=>D.value=s),onFocus:ft,onInput:o[1]||(o[1]=(...s)=>e.filter_search_handle&&e.filter_search_handle(...s)),onKeyup:Mt(ut,["enter"]),type:"text",placeholder:"在此键入搜索"},null,40,$t),[[zt,D.value]]),At,H(t("div",Dt,[t("ul",jt,[(n(!0),_(h,null,m(A.value,s=>(n(),_("li",{onClick:c=>I(s.link)},i(s.title),9,Bt))),256))]),Et],512),[[j,C.value]])]),t("div",Ft,[t("div",It,[t("div",Ut,[t("div",{class:"layout list_layout relative",onClick:o[2]||(o[2]=s=>f(w).change_g_list_layout(!0))},Nt),t("div",{class:"layout grid_layout relative",onClick:o[3]||(o[3]=s=>f(w).change_g_list_layout(!1))},Yt)]),(n(!0),_(h,null,m(y.value,(s,c)=>H((n(),_("div",{onClick:u=>I(s.link),class:"topic_item flex flex_direction_column relative"},[t("div",Pt,[s.img!=""?(n(),_("img",{key:0,class:"item_img",src:s.img,alt:""},null,8,Jt)):(n(),_("img",Gt)),t("div",Qt,[t("span",Wt,[t("span",Xt,i(s.classification),1),Tt(i(s.title),1)]),t("span",{class:"short_msg",innerHTML:s.short_message},null,8,Zt),t("div",te,i(f(V).name)+" / "+i(s.create_date.split("?")[1].replace(/^0+/,""))+"月"+i(s.create_date.split("?")[2].replace(/^0+/,""))+"日 / "+i(s.create_date.split("?")[0])+" / "+i(s.create_date.split("?")[3]),1)])]),t("div",ee,[(n(!0),_(h,null,m(s.tags.split("?"),(u,z)=>(n(),_("span",se,"#"+i(u),1))),256))])],8,Ot)),[[j,f(B)]])),256)),t("div",oe,[t("div",le,[(n(!0),_(h,null,m(y.value,(s,c)=>H((n(),_("div",{onClick:u=>I(s.link),class:"topic_item_grid relative"},[t("div",ae,[s.img!=""?(n(),_("img",{key:0,src:s.img,alt:""},null,8,ne)):(n(),_("img",_e))]),t("div",ce,[t("div",re,[t("span",de,i(s.classification),1),t("span",ue,i(s.create_date.split("?")[0])+"-"+i(s.create_date.split("?")[1])+"-"+i(s.create_date.split("?")[2]),1)]),t("span",fe,i(s.title),1),t("span",{class:"topic_short_msg",innerHTML:s.short_message},null,8,he),t("div",pe,[(n(!0),_(h,null,m(s.tags.split("?"),u=>(n(),_("span",ve,"#"+i(u),1))),256))])])],8,ie)),[[j,!f(B)]])),256))])]),X(a,{current_page:k.value.current_index,page_size:k.value.page_size,onCurrent_change:nt,total:k.value.total},null,8,["current_page","page_size","total"])]),H(t("div",me,[t("div",ge,[xe,t("img",{src:f(V).avatar,class:"z_index_10",alt:""},null,8,we),t("span",{class:"personal_name z_index_10",textContent:i(f(V).name)},null,8,be),t("span",{class:"personal_signature",textContent:i(f(V).signature)},null,8,ye),t("div",Le,[t("div",ke,[Ce,t("span",{textContent:i(f(p).length())},null,8,ze)]),t("div",Me,[Te,t("span",{textContent:i($.classification_total)},null,8,qe)])])]),t("div",He,[Se,t("ul",Ve,[(n(!0),_(h,null,m($.new_topic,s=>(n(),_("li",{onClick:c=>e.$router.push(s.link),class:"flex flex_direction_column",key:s.link},[t("span",null,i(s.title),1),t("span",Ae,i(s.create_date.split("?")[0])+"-"+i(s.create_date.split("?")[1])+"-"+i(s.create_date.split("?")[2]),1)],8,$e))),128))])]),t("div",De,[je,t("ul",Be,[(n(!0),_(h,null,m(f(p).classification,s=>(n(),_("li",{onClick:c=>_t(s),class:"flex flex_direction_row"},[t("span",null,i(s),1)],8,Ee))),256))])]),t("div",Fe,[Ie,t("ul",Ue,[Ke,t("li",null,[t("span",null,"存活时间: "+i($.site_info.run_time.value),1)]),t("li",null,[t("span",null,"上次更新时间: "+i($.site_info.last_update),1)])])])],512),[[j,F.value]])])]),X(r)],64)}}},Ye=mt(Ne,[["__scopeId","data-v-decab140"]]);export{Ye as default};
