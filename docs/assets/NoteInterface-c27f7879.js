import{_ as B,c as S,o as A,d as J,b as P,e as h,f,p as q,j as M,g as t,u as H,s as j,N as O,m as V,B as X,n as F,w as U,v as K,h as y,x as w,F as Z,r as ne,q as _e,O as ae,t as k,a as ee,M as te,L as oe,z as l,A as se,J as ie,D as ce,C as le,I as o,H as re}from"./index-0fbe7eaa.js";import{c as Q,a as W}from"./topic-6c7f23ce.js";import{m as z}from"./marked.esm-98d564e7.js";const de=_=>(q("data-v-4f1e9573"),_=_(),M(),_),ue={id:"note_top_main",class:"relative flex align_items_center justify_content_center"},me=de(()=>t("img",{class:"note_top_main_bg",src:"https://pic.imgdb.cn/item/65d5a2f19f345e8d0320a3c9.jpg",alt:""},null,-1)),he=[me],fe={__name:"NoteTopInterface",setup(_){return S(),A(()=>{}),J(()=>{}),P(()=>{}),(a,b)=>(h(),f("div",ue,he))}},pe=B(fe,[["__scopeId","data-v-4f1e9573"]]),ve={__name:"NoteBgInterface",setup(_){return S(),A(()=>{}),P(()=>{}),(a,b)=>null}};const ge=_=>(q("data-v-eec66c09"),_=_(),M(),_),xe={id:"directory_list_main"},ye={class:"catalog-card"},be={class:"catalog-card-header"},Ee=ge(()=>t("div",{class:"flex flex_direction_row align_items_center"},[t("strong",null,"目录")],-1)),Ie={class:"catalog-content"},Te=["onClick","title"],$e={__name:"Directory",setup(_){const a=H(),{theme:b}=j(a),{layout:I}=j(a);a.$subscribe((i,r)=>{m(r.theme)}),A(()=>{}),J(()=>{O.off("note_data"),document.removeEventListener("scroll",E)});const E=()=>{if(c.value==null||c.value==null)return;let i=[];for(let r=c.value.length-1;r>=0;r--){const n=c.value[r];if(n.scrollTop<=window.scrollY){if(u.value.id===n.id)return;Object.assign(u.value,n),p(n,!0),i.push(n);let s=n.parent;for(;s;)p(s,!0),i.push(s),s=s.parent;for(const T of c.value)i.includes(T)||p(T,!1);return}}};P(()=>{m(b.value),O.on("note_data",()=>d()),document.addEventListener("scroll",E)});const d=()=>{c.value=v()},c=V([]);X(c,i=>{i.length>0?document.querySelector("#directory_list_main").style.display="block":document.querySelector("#directory_list_main").style.display="none"});let u=V({});function v(){let i=[],r=["h1","h2","h3","h4","h5","h6"];if(!document.querySelector(".markdown-body"))return i;let s=Array.from(document.querySelectorAll(".markdown-body *")),T=new Set(s.map(g=>g.tagName.toLowerCase()));for(let g=r.length-1;g>=0;g--)T.has(r[g])||r.splice(g,1);let L=r.map(()=>0),e=document.querySelector("#note_top_main").clientHeight+60;for(let g=0;g<s.length;g++){const N=s[g];let Y=N.tagName.toLowerCase(),C=r.indexOf(Y);if(C==-1)continue;let x={id:Y+"-"+N.innerText+"-"+g,level:C,parent:null,children:[],rawName:N.innerText,scrollTop:N.offsetTop+e};if(i.length>0){let $=i.at(-1);if($.level<x.level)x.parent=$,$.children.push(x);else if($.level>x.level){L.fill(0,C+1);let R=$.parent;for(;R;){if(R.level<x.level){R.children.push(x),x.parent=R;break}R=R.parent}}else $.parent&&(x.parent=$.parent,$.parent.children.push(x))}L[C]+=1,x.isVisible=x.parent==null,x.name=N.innerText,i.push(x)}return i}const m=i=>{};function p(i,r){for(const n of i.children)n.isVisible=r}function D(i){window.scrollTo({top:i+10,behavior:"smooth"})}return(i,r)=>{const n=F("font-awesome-icon");return h(),f("div",xe,[U(t("div",ye,[t("div",be,[t("div",null,[t("span",null,[w(n,{icon:["fas","bars-staggered"],class:"catalog-icon"})]),Ee])]),t("div",Ie,[(h(!0),f(Z,null,ne(c.value,s=>U((h(),f("div",{key:s.id,onClick:T=>D(s.scrollTop),class:_e(["catalog-item",y(u).id==s.id?"active":"not-active"]),style:ae({marginLeft:s.level*10+"px"}),title:s.rawName},k(s.name),15,Te)),[[K,s.isVisible]])),128))])],512),[[K,y(I)]])])}}},we=B($e,[["__scopeId","data-v-eec66c09"]]);const G=_=>(q("data-v-7a2fd429"),_=_(),M(),_),Le={id:"topic_right_main"},ke={class:"personal_item intro flex flex_direction_column align_items_center"},De=["src"],Re=["textContent"],Ve=["textContent"],Oe={class:"topic_class_box flex flex_direction_row"},Ae={class:"topic_classification_total_box flex flex_direction_column align_items_center"},Pe=G(()=>t("h3",null,"文章",-1)),Ne=["textContent"],Se=G(()=>t("div",{class:"topic_classification_total_box flex flex_direction_column align_items_center"},[t("h3",null,"分类"),t("span",null,"3")],-1)),Ce={class:"topic_classification_total_box flex flex_direction_column align_items_center"},je=G(()=>t("h3",null,"笔记",-1)),Be={__name:"NoteRightInterface",setup(_){const a=H(),b=ee(),I=te(),E=oe();S(),A(()=>{}),P(()=>{c(a.theme),d(a.layout)}),a.$subscribe((u,v)=>{c(v.theme),d(v.layout)});const d=u=>{const v=document.querySelector("#topic_right_main");u?v.style.display="block":v.style.display="none"},c=u=>{u?(l("--bg_color","#0b0e14"),l("--color","#f7f7f7"),l("--item_bg","#242b3d"),l("--item_shadow","#242b34"),l("--topic_classification_color","#5e6d78"),l("--topic_classification_num_color","#b5b9d6")):(l("--bg_color","#f7f3f5"),l("--color","#4d4949"),l("--item_bg","#fff"),l("--item_shadow","#cacaca4f"),l("--topic_classification_color","#216eba"),l("--topic_classification_num_color","#4d4949"))};return(u,v)=>(h(),f("div",Le,[t("div",ke,[t("img",{src:y(b).avatar,alt:""},null,8,De),t("span",{class:"personal_name",textContent:k(y(b).name)},null,8,Re),t("span",{class:"personal_signature",textContent:k(y(b).signature)},null,8,Ve),t("div",Oe,[t("div",Ae,[Pe,t("span",{textContent:k(y(I).length())},null,8,Ne)]),Se,t("div",Ce,[je,t("span",null,k(y(E).data.length),1)])])]),w(we)]))}},qe=B(Be,[["__scopeId","data-v-7a2fd429"]]);const Me=_=>(q("data-v-2d5e76a7"),_=_(),M(),_),He={id:"topic_bottom_main"},ze={class:"note_context_switch_box flex flex_direction_row"},Fe={class:"note_switch_item flex flex_direction_column justify_content_center"},Ue={key:0},Je={key:1},Ge={key:2},Ye={class:"note_switch_item flex flex_direction_column justify_content_center"},Ke={key:0},Qe={key:1},We={key:2},Xe=Me(()=>t("div",{id:"gitalk-container"},null,-1)),Ze={__name:"NoteBottomInterface",setup(_){const{params:a}=se(),b=S(),I=H();ee(),te(),A(()=>{}),J(()=>{O.off("note_data")}),I.$subscribe((m,p)=>{v(p.theme)});const E=V(),d=V(),c=V(),u=()=>{const m=a.index-1;m==0?d.value="--":d.value=E.value.directory_list[m-1].name,m==E.value.directory_list.length-1?c.value="--":c.value=E.value.directory_list[m+1].name};P(()=>{v(I.theme),O.on("note_data",m=>{E.value=m,u(),new ie({clientID:"429076372c73a03552c6",clientSecret:"e10cf1b42cb0daf8cda1857f8f9a4ab411c4c91e",repo:"TinyFlowersComment",owner:"sparkle520",admin:["sparkle520"],id:E.value.link,language:"zh-CN",distractionFreeMode:!1,proxy:"https://strong-caramel-969805.netlify.app/github_access_token"}).render("gitalk-container")})});const v=m=>{m?(l("--topic_author_info_box_color","#788086"),l("--topic_author_info_box_bg","#1e2433"),l("--topic_author_info_inner_box_color","#f5f5f5")):(l("--topic_author_info_box_color","#b0c4de"),l("--topic_author_info_box_bg","#f8f8ff"),l("--topic_author_info_inner_box_color","#78c1f8"))};return(m,p)=>(h(),f("div",He,[t("div",ze,[t("div",Fe,[d.value=="--"?(h(),f("div",Ue)):(h(),f("div",Je,"上一章")),d.value=="--"?(h(),f("div",Ge)):(h(),f("div",{key:3,onClick:p[0]||(p[0]=D=>y(b).push(`/note/book/${y(a).id}/${parseInt(y(a).index)-1}`))},k(d.value),1))]),t("div",Ye,[c.value=="--"?(h(),f("div",Ke)):(h(),f("div",Qe,"下一章")),c.value=="--"?(h(),f("div",We)):(h(),f("div",{key:3,onClick:p[1]||(p[1]=D=>y(b).push(`/note/book/${y(a).id}/${parseInt(y(a).index)+1}`))},k(c.value),1))])]),Xe]))}},et=B(Ze,[["__scopeId","data-v-2d5e76a7"]]),tt={id:"topic_main"},ot={class:"topic_container"},st={class:"topic_content"},nt={class:"topic_text"},_t=["innerHTML"],rt={__name:"NoteInterface",setup(_){const{params:a}=se(),b=new z.Renderer,I=oe();z.setOptions({renderer:b,gfm:!1,pedantic:!1,sanitize:!0});const E=()=>{r(a.id,a.index)},d=V("");function c(){const n=document.getElementById("mathjax");re(n)}X(d,n=>{d.value=z(n),le(()=>{c(),i(),O.emit("note_data",I.get_note_by_id(a.id))})});const u=H(),{theme:v}=j(u),{layout:m}=j(u);u.$subscribe((n,s)=>{Q(s.theme),W(s.layout)}),S(),A(()=>{});let p,D;const i=()=>{p=setInterval(()=>{const n=document.getElementById("mathjax");n.clientHeight!=D?(O.emit("note_data",I.get_note_by_id(a.id)),D=n.clientHeight):clearInterval(p)},1e3)};P(()=>{Q(v.value),W(m.value),E()});const r=(n,s)=>{const T=`/src/assets/note_data/${n}/${s}.md`,L=Object.assign({"/src/assets/note_data/1/1.md":()=>o(()=>import("./1-d32c4d54.js"),[]).then(e=>e.default),"/src/assets/note_data/1/2.md":()=>o(()=>import("./2-b28f20ae.js"),[]).then(e=>e.default),"/src/assets/note_data/1/3.md":()=>o(()=>import("./3-1b340cce.js"),[]).then(e=>e.default),"/src/assets/note_data/1/4.md":()=>o(()=>import("./4-b50e1e00.js"),[]).then(e=>e.default),"/src/assets/note_data/1/5.md":()=>o(()=>import("./5-ca2841c1.js"),[]).then(e=>e.default),"/src/assets/note_data/1/6.md":()=>o(()=>import("./6-d61a61b2.js"),[]).then(e=>e.default),"/src/assets/note_data/1/7.md":()=>o(()=>import("./7-ab8fbab2.js"),[]).then(e=>e.default),"/src/assets/note_data/2/1.md":()=>o(()=>import("./1-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/2/10.md":()=>o(()=>import("./10-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/2/11.md":()=>o(()=>import("./11-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/2/12.md":()=>o(()=>import("./12-54226420.js"),[]).then(e=>e.default),"/src/assets/note_data/2/2.md":()=>o(()=>import("./2-d85cd600.js"),[]).then(e=>e.default),"/src/assets/note_data/2/3.md":()=>o(()=>import("./3-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/2/4.md":()=>o(()=>import("./4-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/2/5.md":()=>o(()=>import("./5-d85cd600.js"),[]).then(e=>e.default),"/src/assets/note_data/2/6.md":()=>o(()=>import("./6-d85cd600.js"),[]).then(e=>e.default),"/src/assets/note_data/2/7.md":()=>o(()=>import("./7-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/2/8.md":()=>o(()=>import("./8-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/2/9.md":()=>o(()=>import("./9-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/3/1.md":()=>o(()=>import("./1-d85cd600.js"),[]).then(e=>e.default),"/src/assets/note_data/3/2.md":()=>o(()=>import("./2-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/3/3.md":()=>o(()=>import("./3-d85cd600.js"),[]).then(e=>e.default),"/src/assets/note_data/3/4.md":()=>o(()=>import("./4-d85cd600.js"),[]).then(e=>e.default),"/src/assets/note_data/3/5.md":()=>o(()=>import("./5-e9220a04.js"),[]).then(e=>e.default),"/src/assets/note_data/3/6.md":()=>o(()=>import("./6-e9220a04.js"),[]).then(e=>e.default)});for(const e in L)e==T&&L[e]().then(g=>{d.value=g})};return(n,s)=>{const T=F("TopicLeftInterface"),L=F("Utils"),e=ce("highlight");return h(),f(Z,null,[t("div",tt,[w(ve,{class:"topic_bg"}),w(pe,{class:"topic_top_interface"}),t("div",ot,[w(T),t("div",st,[t("div",nt,[U(t("div",{innerHTML:d.value,id:"mathjax",class:"markdown-body"},null,8,_t),[[e]])]),w(et)]),w(qe)])]),w(L)],64)}}};export{rt as default};
