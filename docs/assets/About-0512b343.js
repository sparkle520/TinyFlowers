import{_ as O,u as j,s as P,a as $,o as S,b as q,c as E,d as A,e as B,p as C,f as L,g as y}from"./index-97276618.js";const b=u=>(C("data-v-f5540132"),u=u(),L(),u),X={id:"about_main",class:"relative"},Y=b(()=>y("canvas",{id:"canv"},null,-1)),F=b(()=>y("div",{class:"absolute absolute_center intro"},[y("span",null," 祝你有一天能和你重要的人重逢")],-1)),R=[Y,F],D={__name:"About",setup(u){const x=j(),{theme:g}=P(x);x.$subscribe((c,d)=>{p(d.theme)}),$(),S(()=>{}),q(()=>{window.removeEventListener("resize",f,!1)}),E(()=>{p(g.value);let c=200,d=window.innerWidth,m=window.innerHeight,M=0,_=0,I=150,o=function(s){return s*Math.PI/180},z=function(){return Math.sin(Math.floor(Math.random()*360)*Math.PI/180)},t={obj:{x:M,y:_,z:I},dest:{x:0,y:0,z:1},dist:{x:0,y:0,z:200},ang:{cplane:0,splane:0,ctheta:0,stheta:0},zoom:1,disp:{x:d/2,y:m/2,z:0},upd:function(){t.dist.x=t.dest.x-t.obj.x,t.dist.y=t.dest.y-t.obj.y,t.dist.z=t.dest.z-t.obj.z,t.ang.cplane=-t.dist.z/Math.sqrt(t.dist.x*t.dist.x+t.dist.z*t.dist.z),t.ang.splane=t.dist.x/Math.sqrt(t.dist.x*t.dist.x+t.dist.z*t.dist.z),t.ang.ctheta=Math.sqrt(t.dist.x*t.dist.x+t.dist.z*t.dist.z)/Math.sqrt(t.dist.x*t.dist.x+t.dist.y*t.dist.y+t.dist.z*t.dist.z),t.ang.stheta=-t.dist.y/Math.sqrt(t.dist.x*t.dist.x+t.dist.y*t.dist.y+t.dist.z*t.dist.z)}},r={parts:{sz:function(s,n){return{x:s.x*n.x,y:s.y*n.y,z:s.z*n.z}},rot:{x:function(s,n){return{x:s.x,y:s.y*Math.cos(o(n.x))-s.z*Math.sin(o(n.x)),z:s.y*Math.sin(o(n.x))+s.z*Math.cos(o(n.x))}},y:function(s,n){return{x:s.x*Math.cos(o(n.y))+s.z*Math.sin(o(n.y)),y:s.y,z:-s.x*Math.sin(o(n.y))+s.z*Math.cos(o(n.y))}},z:function(s,n){return{x:s.x*Math.cos(o(n.z))-s.y*Math.sin(o(n.z)),y:s.x*Math.sin(o(n.z))+s.y*Math.cos(o(n.z)),z:s.z}}},pos:function(s,n){return{x:s.x+n.x,y:s.y+n.y,z:s.z+n.z}}},pov:{plane:function(s){return{x:s.x*t.ang.cplane+s.z*t.ang.splane,y:s.y,z:s.x*-t.ang.splane+s.z*t.ang.cplane}},theta:function(s){return{x:s.x,y:s.y*t.ang.ctheta-s.z*t.ang.stheta,z:s.y*t.ang.stheta+s.z*t.ang.ctheta}},set:function(s){return{x:s.x-t.obj.x,y:s.y-t.obj.y,z:s.z-t.obj.z}}},persp:function(s){return{x:s.x*t.dist.z/s.z*t.zoom,y:s.y*t.dist.z/s.z*t.zoom,z:s.z*t.zoom,p:t.dist.z/s.z}},disp:function(s,n){return{x:s.x+n.x,y:-s.y+n.y,z:s.z+n.z,p:s.p}},steps:function(s,n,l,i,e){let a=r.parts.sz(s,n);return a=r.parts.rot.x(a,l),a=r.parts.rot.y(a,l),a=r.parts.rot.z(a,l),a=r.parts.pos(a,i),a=r.pov.plane(a),a=r.pov.theta(a),a=r.pov.set(a),a=r.persp(a),a=r.disp(a,e),a}};(function(){let s=function(i){this.transIn={},this.transOut={},this.transIn.vtx=i.vtx,this.transIn.sz=i.sz,this.transIn.rot=i.rot,this.transIn.pos=i.pos};s.prototype.vupd=function(){this.transOut=r.steps(this.transIn.vtx,this.transIn.sz,this.transIn.rot,this.transIn.pos,t.disp)};let n=function(){this.vel=.04,this.lim=360,this.diff=200,this.initPos=100,this.toX=M,this.toY=_,this.go()};n.prototype.go=function(){this.canvas=document.getElementById("canv"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.$=canv.getContext("2d"),this.$.globalCompositeOperation="source-over",this.varr=[],this.dist=[],this.calc=[];for(let i=0,e=c;i<e;i++)this.add();this.rotObj={x:0,y:0,z:0},this.objSz={x:d/5,y:m/5,z:d/5}},n.prototype.add=function(){this.varr.push(new s({vtx:{x:z(),y:z(),z:z()},sz:{x:0,y:0,z:0},rot:{x:20,y:-20,z:0},pos:{x:this.diff*Math.sin(360*Math.random()*Math.PI/180),y:this.diff*Math.sin(360*Math.random()*Math.PI/180),z:this.diff*Math.sin(360*Math.random()*Math.PI/180)}})),this.calc.push({x:360*Math.random(),y:360*Math.random(),z:360*Math.random()})},n.prototype.upd=function(){t.obj.x+=(this.toX-t.obj.x)*.05,t.obj.y+=(this.toY-t.obj.y)*.05},n.prototype.draw=function(){this.$.clearRect(0,0,this.canvas.width,this.canvas.height),t.upd(),this.rotObj.x+=.1,this.rotObj.y+=.1,this.rotObj.z+=.1;for(let i=0;i<this.varr.length;i++){for(let a in this.calc[i])this.calc[i].hasOwnProperty(a)&&(this.calc[i][a]+=this.vel,this.calc[i][a]>this.lim&&(this.calc[i][a]=0));if(this.varr[i].transIn.pos={x:this.diff*Math.cos(this.calc[i].x*Math.PI/180),y:this.diff*Math.sin(this.calc[i].y*Math.PI/180),z:this.diff*Math.sin(this.calc[i].z*Math.PI/180)},this.varr[i].transIn.rot=this.rotObj,this.varr[i].transIn.sz=this.objSz,this.varr[i].vupd(),this.varr[i].transOut.p<0)continue;let e=this.$.createRadialGradient(this.varr[i].transOut.x,this.varr[i].transOut.y,this.varr[i].transOut.p,this.varr[i].transOut.x,this.varr[i].transOut.y,this.varr[i].transOut.p*2);this.$.globalCompositeOperation="lighter",e.addColorStop(0,"hsla(255, 255%, 255%, 1)"),e.addColorStop(.5,"hsla("+(i+2)+",85%, 40%,1)"),e.addColorStop(1,"hsla("+i+",85%, 40%,.5)"),this.$.fillStyle=e,this.$.beginPath(),this.$.arc(this.varr[i].transOut.x,this.varr[i].transOut.y,this.varr[i].transOut.p*2,0,Math.PI*2,!1),this.$.fill(),this.$.closePath()}},n.prototype.anim=function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||function(e,a){window.setTimeout(e,1e3/60)}}();let i=(function(){this.upd(),this.draw(),window.requestAnimationFrame(i)}).bind(this);window.requestAnimationFrame(i)},n.prototype.run=function(){this.anim(),window.addEventListener("mousemove",(function(i){this.toX=(i.clientX-this.canvas.width/2)*-.8,this.toY=(i.clientY-this.canvas.height/2)*.8}).bind(this)),window.addEventListener("touchmove",(function(i){i.preventDefault(),this.toX=(i.touches[0].clientX-this.canvas.width/2)*-.8,this.toY=(i.touches[0].clientY-this.canvas.height/2)*.8}).bind(this)),window.addEventListener("mousedown",(function(i){for(let e=0;e<100;e++)this.add()}).bind(this)),window.addEventListener("touchstart",(function(i){i.preventDefault();for(let e=0;e<100;e++)this.add()}).bind(this))},new n().run()})(),window.addEventListener("resize",f,!1)});const f=()=>{canvas.width=w=window.innerWidth,canvas.height=h=window.innerHeight},v=(c,d)=>{document.getElementsByTagName("body")[0].style.setProperty(c,d)},p=c=>{v("--about_bg_color","#0b0e14")};return(c,d)=>(A(),B("div",X,R))}},T=O(D,[["__scopeId","data-v-f5540132"]]);export{T as default};
