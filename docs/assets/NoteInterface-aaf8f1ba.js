import{_ as H,c as V,o as C,d as G,b as S,e as d,f as u,p as R,j as M,g as e,u as q,s as j,K as z,n as T,w as Z,q as F,v as U,z as Y,h as g,A as w,F as ee,r as ae,L as ce,M as le,t as N,a as te,J as oe,l as a,m as ne,G as _e,C as re,E as Q,H as de,D as O}from"./index-2557898b.js";import{c as W,a as X}from"./topic-bf21e478.js";import{u as ue}from"./note-a5c8b069.js";import{m as P}from"./marked.esm-98d564e7.js";const fe=s=>(R("data-v-edf7f432"),s=s(),M(),s),pe={id:"note_top_main",class:"relative flex align_items_center justify_content_center"},me=fe(()=>e("img",{class:"note_top_main_bg",src:"https://pic.imgdb.cn/item/65d5a2f19f345e8d0320a3c9.jpg",alt:""},null,-1)),he=[me],ve={__name:"NoteTopInterface",setup(s){return V(),C(()=>{}),G(()=>{}),S(()=>{}),(i,v)=>(d(),u("div",pe,he))}},ge=H(ve,[["__scopeId","data-v-edf7f432"]]),be={__name:"NoteBgInterface",setup(s){return V(),C(()=>{}),S(()=>{}),(i,v)=>null}};const xe=s=>(R("data-v-6bdca9f7"),s=s(),M(),s),ye={id:"directory_list_main"},$e={class:"catalog-card"},we={class:"catalog-card-header"},ke=xe(()=>e("div",{class:"flex flex_direction_row align_items_center"},[e("svg",{t:"1705577425453",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7633",width:"20",height:"20"},[e("path",{d:"M128 96h768a32 32 0 0 1 0 64H128a32 32 0 1 1 0-64z m0 192h768a32 32 0 0 1 0 64H128a32 32 0 1 1 0-64z m0 384h288a32 32 0 0 1 0 64H128a32 32 0 0 1 0-64z m0 192h288a32 32 0 0 1 0 64H128a32 32 0 0 1 0-64z",fill:"#ACB4C0","p-id":"7634"}),e("path",{d:"M704 480h-80a178.24 178.24 0 0 0-16 0.704V544H128a32 32 0 0 1 0-64h576z m-40 64H608z",fill:"#5D6D7E","p-id":"7635"})]),e("span",{style:{"margin-left":"8px",color:"#5D6D7E"}},"目录")],-1)),Ie={class:"catalog-content"},Te=["onClick","title"],Ne={__name:"Directory",setup(s){const i=q(),{theme:v}=j(i),{layout:y}=j(i);i.$subscribe((o,t)=>{l(t.theme)}),C(()=>{}),G(()=>{z.off("note_data"),document.removeEventListener("scroll",p)});const p=()=>{if(n.value==null||n.value==null)return;let o=[];for(let t=n.value.length-1;t>=0;t--){const m=n.value[t];if(m.scrollTop<=window.scrollY){if(f.value.id===m.id)return;Object.assign(f.value,m),b(m,!0),o.push(m);let c=m.parent;for(;c;)b(c,!0),o.push(c),c=c.parent;for(const D of n.value)o.includes(D)||b(D,!1);return}}};S(()=>{l(v.value),z.on("note_data",()=>_()),document.addEventListener("scroll",p)});const _=()=>{n.value=k()},n=T([]);Z(n,o=>{o.length>0?document.querySelector("#directory_list_main").style.display="block":document.querySelector("#directory_list_main").style.display="none"});let f=T({});function k(){let o=[],t=["h1","h2","h3"];if(!document.querySelector(".markdown-body"))return o;let c=Array.from(document.querySelectorAll(".markdown-body *")),D=new Set(c.map(x=>x.tagName.toLowerCase()));for(let x=t.length-1;x>=0;x--)D.has(t[x])||t.splice(x,1);let A=t.map(()=>0),se=document.querySelector("#note_top_main").clientHeight-20;for(let x=0;x<c.length;x++){const L=c[x];let K=L.tagName.toLowerCase(),B=t.indexOf(K);if(B==-1)continue;let h={id:K+"-"+L.innerText+"-"+x,level:B,parent:null,children:[],rawName:L.innerText,scrollTop:L.offsetTop+se};if(o.length>0){let $=o.at(-1);if($.level<h.level)h.parent=$,$.children.push(h);else if($.level>h.level){A.fill(0,B+1);let I=$.parent;for(;I;){if(I.level<h.level){I.children.push(h),h.parent=I;break}I=I.parent}}else $.parent&&(h.parent=$.parent,$.parent.children.push(h))}A[B]+=1;let ie=A.slice(0,B+1).join(".");h.isVisible=h.parent==null,h.name=ie+". "+L.innerText,o.push(h)}return o}const r=(o,t)=>{document.getElementsByTagName("body")[0].style.setProperty(o,t)},l=o=>{o?r("--directory_list_bg","#242837"):r("--directory_list_bg","#ffff")};function b(o,t){for(const m of o.children)m.isVisible=t}function E(o){window.scrollTo({top:o,behavior:"smooth"})}return(o,t)=>{const m=F("font-awesome-icon");return d(),u("div",ye,[U(e("div",$e,[e("div",we,[e("div",null,[e("span",null,[w(m,{icon:["fas","bars-staggered"],class:"catalog-icon"})]),ke])]),e("div",Ie,[(d(!0),u(ee,null,ae(n.value,c=>U((d(),u("div",{key:c.id,onClick:D=>E(c.scrollTop),class:ce(["catalog-item",g(f).id==c.id?"active":"not-active"]),style:le({marginLeft:c.level*20+"px"}),title:c.rawName},N(c.name),15,Te)),[[Y,c.isVisible]])),128))])],512),[[Y,g(y)]])])}}},Ce=H(Ne,[["__scopeId","data-v-6bdca9f7"]]);const J=s=>(R("data-v-a51dbe86"),s=s(),M(),s),Se={id:"topic_right_main"},Ee={class:"personal_item intro flex flex_direction_column align_items_center"},De=["src"],Le=["textContent"],Be=["textContent"],ze={class:"topic_class_box flex flex_direction_row"},Ve={class:"topic_classification_total_box flex flex_direction_column align_items_center"},je=J(()=>e("h3",null,"文章",-1)),He=["textContent"],Re=J(()=>e("div",{class:"topic_classification_total_box flex flex_direction_column align_items_center"},[e("h3",null,"分类"),e("span",null,"3")],-1)),Me=J(()=>e("div",{class:"topic_classification_total_box flex flex_direction_column align_items_center"},[e("h3",null,"笔记"),e("span",null,"1")],-1)),qe={__name:"NoteRightInterface",setup(s){const i=q(),v=te(),y=oe();V(),C(()=>{}),S(()=>{_(i.theme),p(i.layout)}),i.$subscribe((n,f)=>{_(f.theme),p(f.layout)});const p=n=>{const f=document.querySelector("#topic_right_main");n?f.style.display="block":f.style.display="none"},_=n=>{n?(a("--bg_color","#0b0e14"),a("--color","#f7f7f7"),a("--item_bg","#242b3d"),a("--item_shadow","#242b34"),a("--topic_classification_color","#5e6d78"),a("--topic_classification_num_color","#b5b9d6")):(a("--bg_color","#f7f3f5"),a("--color","#4d4949"),a("--item_bg","#fff"),a("--item_shadow","#cacaca4f"),a("--topic_classification_color","#216eba"),a("--topic_classification_num_color","#4d4949"))};return(n,f)=>(d(),u("div",Se,[e("div",Ee,[e("img",{src:g(v).avatar,alt:""},null,8,De),e("span",{class:"personal_name",textContent:N(g(v).name)},null,8,Le),e("span",{class:"personal_signature",textContent:N(g(v).signature)},null,8,Be),e("div",ze,[e("div",Ve,[je,e("span",{textContent:N(g(y).length())},null,8,He)]),Re,Me])]),w(Ce)]))}},Ae=H(qe,[["__scopeId","data-v-a51dbe86"]]);const Oe=s=>(R("data-v-9d40e759"),s=s(),M(),s),Pe={id:"topic_bottom_main"},Fe={class:"note_context_switch_box flex flex_direction_row"},Ue={class:"note_switch_item flex flex_direction_column justify_content_center"},Ge={key:0},Je={key:1},Ke={key:2},Ye={class:"note_switch_item flex flex_direction_column justify_content_center"},Qe={key:0},We={key:1},Xe={key:2},Ze=Oe(()=>e("div",{id:"gitalk-container"},null,-1)),et={__name:"NoteBottomInterface",setup(s){const{params:i}=ne(),v=V(),y=q();te(),oe(),C(()=>{}),G(()=>{z.off("note_data")}),y.$subscribe((r,l)=>{k(l.theme)});const p=T(),_=T(),n=T(),f=()=>{const r=i.index-1;r==0?_.value="--":_.value=p.value.directory_list[r-1].name,r==p.value.directory_list.length-1?n.value="--":n.value=p.value.directory_list[r+1].name};S(()=>{k(y.theme),z.on("note_data",r=>{p.value=r,f(),new _e({clientID:"429076372c73a03552c6",clientSecret:"e10cf1b42cb0daf8cda1857f8f9a4ab411c4c91e",repo:"TinyFlowersComment",owner:"sparkle520",admin:["sparkle520"],id:p.value.link,language:"zh-CN",distractionFreeMode:!1,proxy:"https://strong-caramel-969805.netlify.app/github_access_token"}).render("gitalk-container")})});const k=r=>{r?(a("--topic_author_info_box_color","#788086"),a("--topic_author_info_box_bg","#1e2433"),a("--topic_author_info_inner_box_color","#f5f5f5")):(a("--topic_author_info_box_color","#b0c4de"),a("--topic_author_info_box_bg","#f8f8ff"),a("--topic_author_info_inner_box_color","#78c1f8"))};return(r,l)=>(d(),u("div",Pe,[e("div",Fe,[e("div",Ue,[_.value=="--"?(d(),u("div",Ge)):(d(),u("div",Je,"上一章")),_.value=="--"?(d(),u("div",Ke)):(d(),u("div",{key:3,onClick:l[0]||(l[0]=b=>g(v).push(`/note/book/${g(i).id}/${parseInt(g(i).index)-1}`))},N(_.value),1))]),e("div",Ye,[n.value=="--"?(d(),u("div",Qe)):(d(),u("div",We,"下一章")),n.value=="--"?(d(),u("div",Xe)):(d(),u("div",{key:3,onClick:l[1]||(l[1]=b=>g(v).push(`/note/book/${g(i).id}/${parseInt(g(i).index)+1}`))},N(n.value),1))])]),Ze]))}},tt=H(et,[["__scopeId","data-v-9d40e759"]]),ot={id:"topic_main"},nt={class:"topic_container"},st={class:"topic_content"},it={class:"topic_text"},at=["innerHTML"],ut={__name:"NoteInterface",setup(s){const{params:i}=ne(),v=new P.Renderer,y=ue();P.setOptions({renderer:v,gfm:!1,pedantic:!1,sanitize:!0});const p=()=>{r(i.id,i.index)},_=T("");Z(_,l=>{_.value=P(l),Q(()=>{de(document.getElementById("mathjax"))}),Q(()=>{z.emit("note_data",y.get_note_by_id(i.id))})});const n=q(),{theme:f}=j(n),{layout:k}=j(n);n.$subscribe((l,b)=>{W(b.theme),X(b.layout)}),V(),C(()=>{}),S(()=>{W(f.value),X(k.value),p()});const r=(l,b)=>{const E=`/src/assets/note_data/${l}/${b}.md`,o=Object.assign({"/src/assets/note_data/1/1.md":()=>O(()=>import("./1-63796bce.js"),[]).then(t=>t.default),"/src/assets/note_data/1/2.md":()=>O(()=>import("./2-b21a345d.js"),[]).then(t=>t.default),"/src/assets/note_data/2/1.md":()=>O(()=>import("./1-810fddc3.js"),[]).then(t=>t.default)});for(const t in o)t==E&&o[t]().then(m=>{_.value=m})};return(l,b)=>{const E=F("TopicLeftInterface"),o=F("Utils"),t=re("highlight");return d(),u(ee,null,[e("div",ot,[w(be,{class:"topic_bg"}),w(ge,{class:"topic_top_interface"}),e("div",nt,[w(E),e("div",st,[e("div",it,[U(e("div",{innerHTML:_.value,id:"mathjax",class:"markdown-body"},null,8,at),[[t]])]),w(tt)]),w(Ae)])]),w(o)],64)}}};export{ut as default};
