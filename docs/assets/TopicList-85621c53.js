import{y as _,_ as gt,z as mt,u as yt,M as bt,a as xt,s as K,c as wt,o as J,b as kt,d as Lt,k as v,A as Ct,l as Q,e as l,f as c,g as t,w as T,D as zt,E as Mt,v as j,F as p,r as g,h as d,m as W,t as a,B as Tt,G as Ht,q as qt,x as St}from"./index-564cb4a6.js";const X=y=>{y?(_("--topic_bg_color","#0b0e14"),_("--topic_bg_top","#0d1c2b"),_("--topic_list_bg","#0b0e14"),_("--color","#f7f7f7"),_("--item_bg","#242b3dc7"),_("--item_shadow","#1f2d3d26"),_("--title_color","#f7f7f7"),_("--title_af_bg","#a3a7c1aa"),_("--tag_box_bg","#2d3041c7"),_("--tag_bg","#9fa3bc"),_("--topic_classification_color","#5e6d78"),_("--topic_classification_num_color","#b5b9d6"),_("--filter_search_box_bg","#123"),_("--tag_item_bg","#242b3dc7"),_("--layout_hover","#0b0e14")):(_("--topic_bg_color","#fdfbfb"),_("--topic_bg_top","#fdfbfb"),_("--topic_list_bg","#e8f6f9"),_("--color","#393e46"),_("--item_bg","#ffffffc7"),_("--item_shadow","#1f2d3d26"),_("--title_color","#3a4a5a"),_("--title_af_bg","#22113364"),_("--tag_box_bg","#9966ff33"),_("--tag_bg","#9966ff"),_("--topic_classification_color","#ff6666"),_("--topic_classification_num_color","#9966ff"),_("--filter_search_box_bg","#ffff"),_("--tag_item_bg","#f5f5f5"),_("--layout_hover","#f1e5ff"))};const f=y=>(qt("data-v-3cf1f03d"),y=y(),St(),y),Vt={id:"topic_list_main",class:"f f_d_c r"},$t={class:"topic_search_box r"},Dt=["onKeyup"],jt=f(()=>t("label",{class:"search_icon a",for:"topic_search"},[t("svg",{t:"1709027338854",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9410",width:"72",height:"72"},[t("path",{d:"M549.660444 56.888889a30.72 30.72 0 0 1 21.617778 8.988444l205.425778 205.482667c5.688889 5.688889 8.988444 13.425778 8.988444 21.560889v271.132444a244.337778 244.337778 0 0 0-316.245333 347.989334H144.327111A30.492444 30.492444 0 0 1 113.777778 881.493333V87.438222C113.777778 70.542222 127.431111 56.888889 144.327111 56.888889h405.333333zM387.811556 477.013333H212.195556a7.623111 7.623111 0 0 0-7.623112 7.68v45.795556c0 4.209778 3.413333 7.623111 7.623112 7.623111h175.616c4.209778 0 7.623111-3.413333 7.623111-7.623111V484.693333a7.623111 7.623111 0 0 0-7.623111-7.68z m190.862222-129.763555H212.195556a7.623111 7.623111 0 0 0-7.623112 7.623111v45.795555c0 4.209778 3.413333 7.623111 7.623112 7.623112h366.478222c4.209778 0 7.623111-3.413333 7.623111-7.623112v-45.795555a7.623111 7.623111 0 0 0-7.623111-7.623111z m-43.064889-219.932445v179.598223h179.655111L535.608889 127.317333z m372.394667 832.398223l-89.031112-89.031112a167.992889 167.992889 0 1 0-41.585777 38.912l90.339555 90.453334a7.395556 7.395556 0 0 0 5.347556 2.161778 7.68 7.68 0 0 0 5.347555-2.218667l29.582223-29.582222a7.566222 7.566222 0 0 0 0-10.695111z m-223.004445-83.512889a106.837333 106.837333 0 1 1 0-213.788445 106.837333 106.837333 0 1 1 0 213.788445z",fill:"#98fb98","p-id":"9411"})])],-1)),It={class:"filter_search_box a"},Bt={class:"f f_d_c"},At=["onClick"],Et=f(()=>t("div",{class:"query_time"},[t("span",{class:"query_text"})],-1)),Ft={class:"width_full f f_d_r justify_content_center gap_16 z_index_10"},Ut={class:"topic_box"},Kt={class:"layout_box f f_d_r a_c r"},Nt=f(()=>t("svg",{t:"1707409279938",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13268",width:"22",height:"22"},[t("path",{d:"M192 304a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#e96969","p-id":"13269"}),t("path",{d:"M192 528a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z m352 0a48 48 0 0 1 48-48h192a48 48 0 0 1 0 96H592a48 48 0 0 1-48-48z",fill:"#e96969","p-id":"13270"}),t("path",{d:"M192 752a48 48 0 0 1 48-48h544a48 48 0 0 1 0 96H240a48 48 0 0 1-48-48z",fill:"#e96969","p-id":"13271"})],-1)),Rt=[Nt],Yt=f(()=>t("svg",{t:"1707408621772",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5142",width:"22",height:"22"},[t("path",{d:"M450.56 563.2a10.24 10.24 0 0 1 10.16832 9.04192L460.8 573.44v245.76a10.24 10.24 0 0 1-9.04192 10.16832L450.56 829.44H204.8a10.24 10.24 0 0 1-10.16832-9.04192L194.56 819.2V573.44a10.24 10.24 0 0 1 9.04192-10.16832L204.8 563.2h245.76z m368.64 0a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H573.44a10.24 10.24 0 0 1-10.24-10.24V573.44a10.24 10.24 0 0 1 10.24-10.24z m-378.89024 20.48h-225.28v225.28h225.28V583.68z m368.64 0h-225.28v225.28h225.28V583.68zM450.56 194.56a10.24 10.24 0 0 1 10.24 10.24v245.76a10.24 10.24 0 0 1-10.24 10.24H204.8a10.24 10.24 0 0 1-10.24-10.24V204.8a10.24 10.24 0 0 1 10.24-10.24z m368.64 0a10.24 10.24 0 0 1 10.16832 9.04192L829.44 204.8v245.76a10.24 10.24 0 0 1-9.04192 10.16832L819.2 460.8H573.44a10.24 10.24 0 0 1-10.16832-9.04192L563.2 450.56V204.8a10.24 10.24 0 0 1 9.04192-10.16832L573.44 194.56h245.76z m-378.89024 20.48h-225.28v225.28h225.28V215.04z m368.64 0h-225.28v225.28h225.28V215.04z",fill:"#e96969","p-id":"5143"})],-1)),Gt=[Yt],Ot={class:"topic_list_box"},Pt=["onClick"],Jt={class:"item_inner_box f f_d_r"},Qt=["src"],Wt={key:1,class:"item_img",src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},Xt={class:"item_content f f_d_c"},Zt={class:"r title f f_d_r a_c"},te={class:"item_classification r"},ee=["innerHTML"],se={class:"date f f_d_r justify_content_center"},oe={class:"a tag_box f f_d_r"},_e={class:"topic_grid_box f f_d_r"},ae={class:"topic_grid_inner_box margin_0_auto f f_d_r warp"},ie=["onClick"],le={class:"img_box r"},ce=["src"],ne={key:1,src:"https://pic.imgdb.cn/item/65c5a15f9f345e8d03c1f6a4.jpg",alt:""},re={class:"topic_item_inner_grid f f_d_c"},de={class:"f f_d_r a_c"},fe={class:"classification_box"},ue={class:"date r f f_d_r a_c"},pe={class:"topic_title"},he=["innerHTML"],ve={class:"tags_box f f_d_r"},ge={class:"personal_box f f_d_c"},me={class:"personal_item intro f r f_d_c a_c"},ye=f(()=>t("div",{class:"avatar_bg a"},null,-1)),be=["src"],xe=["textContent"],we=["textContent"],ke={class:"width_full f f_d_r"},Le={class:"topic_classification_total_box f f_d_c a_c"},Ce=f(()=>t("h3",null,"文章",-1)),ze=["textContent"],Me={class:"topic_classification_total_box f f_d_c a_c"},Te=f(()=>t("h3",null,"分类",-1)),He=["textContent"],qe={class:"personal_item new_topic_box f f_d_c a_c"},Se=f(()=>t("h3",{class:"l_title r"},"最新文章",-1)),Ve={class:"f f_d_c"},$e=["onClick"],De={class:"new_topic_date"},je={class:"personal_item classification_box f f_d_c a_c"},Ie=f(()=>t("h3",{class:"l_title r"},"分类",-1)),Be={class:"f f_d_c"},Ae=["onClick"],Ee={class:"personal_item site_info_box f f_d_c a_c"},Fe=f(()=>t("h3",{class:"l_title r"},"网站信息",-1)),Ue={class:"f f_d_c"},Ke=f(()=>t("li",null,[t("span",null,"网站名称: Tiny Flowers")],-1)),Ne={class:"topic_list_foot r f f_d_r a_c justify_content_center"},Re={class:"left_foot f f_d_c justify_content_center"},Ye=f(()=>t("span",{class:"title_foot"},"人生格言",-1)),Ge=["innerHTML"],Oe=f(()=>t("div",{class:"mid_foot f f_d_c"},[t("span",{class:"title_foot"})],-1)),Pe={class:"right_foot f f_d_c justify_content_center"},Je=f(()=>t("span",{class:"title_foot"},"联系我",-1)),Qe={class:"text_foot"},We={class:"text_foot"},Xe={class:"text_foot"},m=12,Z="2024-01-05 11:01:01",Ze={__name:"TopicList",setup(y){const{params:H}=mt(),b=yt(),h=bt(),u=xt(),{theme:tt}=K(b),{layout:et}=K(b),{list_layout:I}=K(b),B=wt();b.$subscribe((e,o)=>{X(o.theme),Y(o.layout),N(o.list_layout)}),J(()=>{}),kt(()=>{_t(),document.addEventListener("click",R),document.addEventListener("scroll",A)});const st=e=>{e.classList.contains("fade_out")&&(e.classList.remove("fade_out"),e.classList.add("fade_in"))},ot=e=>{e.classList.contains("fade_in")&&(e.classList.remove("fade_in"),e.classList.add("fade_out"))},N=e=>{const o=document.querySelectorAll(".layout"),i=document.querySelector(".topic_grid_box"),r=document.querySelector(".topic_list_box");e?(o[0].classList.add("layout_active"),o[1].classList.remove("layout_active"),i.style.transform="translateY(-36px)",i.style.opacity=.5,r.style.opacity=1):(o[1].classList.add("layout_active"),o[0].classList.remove("layout_active"),i.style.transform=" translateY(0)",i.style.opacity=1,r.style.opacity=0)},R=e=>{document.querySelector(".topic_search_box").contains(e.target)||(L.value=!1)},_t=()=>{window.scrollTo(0,0),Y(et.value),X(tt.value),N(I.value),A(),O(Z)},Y=e=>{const o=document.querySelector(".topic_box"),i=document.querySelector(".topic_grid_inner_box");e?(o.style.width="866px",E.value=!0,i.style.width="866px"):(o.style.width="1100px",E.value=!1,i.style.width="1100px")};let x;const A=()=>{x==null&&(x=document.querySelectorAll(".topic_item"));for(let e=0;e<x.length;e++)window.scrollY>=x[e].offsetTop-window.innerHeight/1.2?st(x[e]):ot(x[e])};Lt(()=>{document.removeEventListener("scroll",A),clearInterval(dt),document.removeEventListener("click",R)}),J(()=>{at()});const E=v(!0),w=v(),k=v({total:0,page_size:m,current_index:H.page}),at=()=>{h.select_all_from_classification(H.classification),w.value=h.current_data,it(w.value,H.page)},it=(e,o)=>{o*m>=e.length?w.value=e.slice(o*m-m):w.value=e.slice((o-1)*m,(o-1)*m+m),k.value.total=e.length},F=e=>{B.push(e)},lt=e=>{B.push(`/article/list/${H.classification}/`+e),Tt(()=>{window.scrollTo(0,0),k.value.current_index=e})},ct=e=>{B.push(`/article/list/${e}/1`)},G=v(""),O=e=>{let o=new Date(e),r=new Date().getTime()-o.getTime(),s=Math.floor(r/(24*3600*1e3)),n=r%(24*3600*1e3),$=Math.floor(n/(3600*1e3)),D=n%(3600*1e3),C=Math.floor(D/(60*1e3));G.value=`${s}天${$}小时${C}分钟`},nt=()=>{let e=[];e=h.data.slice(0,4).map(U=>rt(U.create_date));let i=e.sort((U,vt)=>{let z=vt.split("-"),M=U.split("-");return new Date(z[0],z[1]-1,z[2],z[3],z[4])-new Date(M[0],M[1]-1,M[2],M[3],M[4])})[0].split("-"),r=new Date(i[0],i[1]-1,i[2],i[3],i[4]),n=new Date().getTime()-r.getTime(),$=Math.floor(n/(24*3600*1e3)),D=n%(24*3600*1e3),C=Math.floor(D/(3600*1e3)),pt=D%(3600*1e3),ht=Math.floor(pt/(60*1e3));return $==0&&C<24?C===0?ht+"分钟前":C+"小时前":$+"天前"},rt=e=>e.split("?")[0]+"-"+e.split("?")[1]+"-"+e.split("?")[2]+"-"+e.split("?")[3].split(":")[0]+"-"+e.split("?")[3].split(":")[1];let dt=setInterval(()=>{O(Z)},6e4);const q={classification_total:4,new_topic:h.data.slice(0,4),site_info:{name:"Tiny Flowers",run_time:G,last_update:nt()}},ft=e=>{window.event?e.keyCode:e.which},S=v([]),V=v();Ct(V,(e,o)=>{if(e==""){S.value=[],L.value=!1;return}L.value=!0,S.value=[];const i=performance.now();P(h.get_all(),0,e);const r=performance.now(),s=document.querySelector(".query_text"),n=r-i;s.innerHTML="查询耗时: "+n+"ms"});const P=(e,o,i)=>{if(o>e.length-1)return;i.toLowerCase();let r=Math.min(10,e.length-o);window.requestAnimationFrame(()=>{for(let s=0;s<r;s++)e[o+s].title.toLowerCase().indexOf(i)==-1&&e[o+s].tags.toLowerCase().indexOf(i)==-1||S.value.push(e[o+s]);P(e,o+r,i)})},L=v(!1),ut=()=>{V.value.length!=0&&(L.value=!0)};return(e,o)=>{const i=Q("Pagination"),r=Q("Utils");return l(),c(p,null,[t("div",Vt,[t("div",$t,[T(t("input",{id:"topic_search",class:"topic_search","onUpdate:modelValue":o[0]||(o[0]=s=>V.value=s),onFocus:ut,onInput:o[1]||(o[1]=(...s)=>e.filter_search_handle&&e.filter_search_handle(...s)),onKeyup:Mt(ft,["enter"]),type:"text",placeholder:"在此键入搜索"},null,40,Dt),[[zt,V.value]]),jt,T(t("div",It,[t("ul",Bt,[(l(!0),c(p,null,g(S.value,s=>(l(),c("li",{key:s,onClick:n=>F(s.link)},a(s.title),9,At))),128))]),Et],512),[[j,L.value]])]),t("div",Ft,[t("div",Ut,[t("div",Kt,[t("div",{class:"layout list_layout r",onClick:o[2]||(o[2]=s=>d(b).change_g_list_layout(!0))},Rt),t("div",{class:"layout f a_c j_c_c grid_layout r",onClick:o[3]||(o[3]=s=>d(b).change_g_list_layout(!1))},Gt)]),t("div",Ot,[(l(!0),c(p,null,g(w.value,s=>T((l(),c("div",{onClick:n=>F(s.link),key:s,class:"topic_item fade_out f f_d_c r"},[t("div",Jt,[s.img!=""?(l(),c("img",{key:0,class:"item_img",src:s.img,alt:""},null,8,Qt)):(l(),c("img",Wt)),t("div",Xt,[t("span",Zt,[t("span",te,a(s.classification),1),Ht(a(s.title),1)]),t("span",{class:"short_msg",innerHTML:s.short_message},null,8,ee),t("div",se,a(d(u).name)+" / "+a(s.create_date.split("?")[1].replace(/^0+/,""))+"月"+a(s.create_date.split("?")[2].replace(/^0+/,""))+"日 / "+a(s.create_date.split("?")[0])+" / "+a(s.create_date.split("?")[3]),1)])]),t("div",oe,[(l(!0),c(p,null,g(s.tags.split("?"),n=>(l(),c("span",{class:"tag",key:n},"#"+a(n),1))),128))])],8,Pt)),[[j,d(I)]])),128))]),t("div",_e,[t("div",ae,[(l(!0),c(p,null,g(w.value,s=>T((l(),c("div",{onClick:n=>F(s.link),key:s,class:"topic_item_grid r"},[t("div",le,[s.img!=""?(l(),c("img",{key:0,src:s.img,alt:""},null,8,ce)):(l(),c("img",ne))]),t("div",re,[t("div",de,[t("span",fe,a(s.classification),1),t("span",ue,a(s.create_date.split("?")[0])+"-"+a(s.create_date.split("?")[1])+"-"+a(s.create_date.split("?")[2]),1)]),t("span",pe,a(s.title),1),t("span",{class:"topic_short_msg",innerHTML:s.short_message},null,8,he),t("div",ve,[(l(!0),c(p,null,g(s.tags.split("?"),n=>(l(),c("span",{class:"tag_item",key:n},"#"+a(n),1))),128))])])],8,ie)),[[j,!d(I)]])),128))])]),W(i,{current_page:k.value.current_index,page_size:k.value.page_size,onCurrent_change:lt,total:k.value.total},null,8,["current_page","page_size","total"])]),T(t("div",ge,[t("div",me,[ye,t("img",{src:d(u).avatar,class:"z_index_10",alt:""},null,8,be),t("span",{class:"personal_name z_index_10",textContent:a(d(u).name)},null,8,xe),t("span",{class:"personal_signature",textContent:a(d(u).signature)},null,8,we),t("div",ke,[t("div",Le,[Ce,t("span",{textContent:a(d(h).length())},null,8,ze)]),t("div",Me,[Te,t("span",{textContent:a(q.classification_total)},null,8,He)])])]),t("div",qe,[Se,t("ul",Ve,[(l(!0),c(p,null,g(q.new_topic,s=>(l(),c("li",{onClick:n=>e.$router.push(s.link),class:"f f_d_c",key:s.link},[t("span",null,a(s.title),1),t("span",De,a(s.create_date.split("?")[0])+"-"+a(s.create_date.split("?")[1])+"-"+a(s.create_date.split("?")[2]),1)],8,$e))),128))])]),t("div",je,[Ie,t("ul",Be,[(l(!0),c(p,null,g(d(h).classification,s=>(l(),c("li",{key:s,onClick:n=>ct(s),class:"f f_d_r"},[t("span",null,a(s),1)],8,Ae))),128))])]),t("div",Ee,[Fe,t("ul",Ue,[Ke,t("li",null,[t("span",null,"存活时间: "+a(q.site_info.run_time.value),1)]),t("li",null,[t("span",null,"上次更新时间: "+a(q.site_info.last_update),1)])])])],512),[[j,E.value]])])]),W(r),t("div",Ne,[t("div",Re,[Ye,t("span",{class:"text_foot",innerHTML:d(u).aphorism},null,8,Ge)]),Oe,t("div",Pe,[Je,t("span",Qe,"邮箱: "+a(d(u).e_mail),1),t("span",We,"GitHub Account: "+a(d(u).github_account),1),t("span",Xe,"小红书ID: "+a(d(u).red_book_ID),1)])])],64)}}},es=gt(Ze,[["__scopeId","data-v-3cf1f03d"]]);export{es as default};
