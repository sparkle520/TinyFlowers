import{h as n,_ as ve,k as xe,u as ge,l as we,m as be,s as J,a as ye,o as Q,c as ke,b as Ce,n as v,q as X,w as Me,v as Z,d as r,e as d,g as e,x as P,y as Te,z as Le,A as ee,F as S,r as B,B as te,C as u,t as o,p as $e,f as Se}from"./index-e53f94c6.js";const se=x=>{x?(n("--bg_color","#0b0e14"),n("--color","#f7f7f7"),n("--item_bg","#242b3d"),n("--item_shadow","#242b34"),n("--title_color","#f7f7f7"),n("--title_af_bg","#a3a7c1aa"),n("--tag_box_bg","#2d3041"),n("--tag_bg","#9fa3bc"),n("--topic_classification_color","#5e6d78"),n("--topic_classification_num_color","#b5b9d6")):(n("--bg_color","#f7f3f5"),n("--color","#000000"),n("--item_bg","#ffffff"),n("--item_shadow","#cacaca4f"),n("--title_color","#173e6c"),n("--title_af_bg","#22113364"),n("--tag_box_bg","#dae6e7"),n("--tag_bg","#41a8a8"),n("--topic_classification_color","#173e6c"),n("--topic_classification_num_color","#e06530"))};const c=x=>($e("data-v-9cc16c5e"),x=x(),Se(),x),qe={id:"topic_list_main",class:"flex flex_direction_column"},De={class:"topic_search_box relative"},Ie=["onKeyup"],Ae=c(()=>e("label",{class:"search_icon absolute",for:"topic_search"},[e("img",{src:"https://pic.imgdb.cn/item/65b80090871b83018addc8dc.png",alt:""})],-1)),Ee={class:"filter_search_box absolute"},Fe={class:"flex flex_direction_column"},Be=["onClick"],Ue={class:"width_full flex flex_direction_row justify_content_center gap_1vw z_index_10"},We={class:"topic_box"},je=["onClick"],ze={class:"item_inner_box margin_2_percent flex flex_direction_column"},Ke={class:"relative title"},Pe=["innerHTML"],Re={class:"date flex flex_direction_row justify_content_center"},Ve={class:"absolute tag_box flex flex_direction_row"},He={class:"tag"},Ne={class:"personal_box flex flex_direction_column"},Oe={class:"personal_item intro flex flex_direction_column align_items_center"},Ye=["src"],Ge=["textContent"],Je=["textContent"],Qe={class:"width_full flex flex_direction_row"},Xe={class:"topic_classification_total_box flex flex_direction_column align_items_center"},Ze=c(()=>e("h3",null,"文章",-1)),et=["textContent"],tt={class:"topic_classification_total_box flex flex_direction_column align_items_center"},st=c(()=>e("h3",null,"分类",-1)),lt=["textContent"],ot={class:"personal_item new_topic_box flex flex_direction_column align_items_center"},nt=c(()=>e("h3",null,"最新文章",-1)),it={class:"flex flex_direction_column"},at=["onClick"],ct={class:"new_topic_date"},_t={class:"personal_item classification_box flex flex_direction_column align_items_center"},rt=c(()=>e("h3",null,"分类",-1)),dt={class:"flex flex_direction_column"},ut=c(()=>e("span",null,"学习笔记",-1)),pt=c(()=>e("span",null,"技术分享",-1)),ft=c(()=>e("span",null,"生活随想",-1)),ht=c(()=>e("span",null,"二次元",-1)),mt={class:"personal_item site_info_box flex flex_direction_column align_items_center"},vt=c(()=>e("h3",null,"网站信息",-1)),xt={class:"flex flex_direction_column"},gt=c(()=>e("li",null,[e("span",null,"网站名称: Tiny Flowers")],-1)),wt=c(()=>e("img",{class:"topic_list_main_bg",src:"https://pic.imgdb.cn/item/65ba5060871b83018a46c69f.jpg",alt:""},null,-1)),f=10,le="2024-01-05 11:01:01",bt={__name:"TopicList",setup(x){const{params:U}=xe(),W=ge(),i=we(),q=be(),{theme:oe}=J(W),{layout:ne}=J(W),g=ye();W.$subscribe((t,s)=>{se(s.theme),V(s.layout)}),Q(()=>{}),ke(()=>{ie(),document.addEventListener("click",R)});const R=t=>{document.querySelector(".topic_search_box").contains(t.target)||(C.value=!1)},ie=()=>{window.scrollTo(0,0),V(ne.value),se(oe.value),w=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",b),b(),Y(le)};let w=[];const V=t=>{const s=document.querySelector(".topic_box");t?(s.style.width="60vw",j.value=!0):(s.style.width="80vw",j.value=!1)},D=[{name:"学习笔记"},{name:"技术分享"},{name:"生活随想"},{name:"二次元"}],b=()=>{for(let t=0;t<w.length;t++){let s=w[t];s.offsetTop<=window.scrollY+900&&(s.style.opacity="1",s.classList.add("item_animation"))}},ae=()=>{for(let t=0;t<w.length;t++){let s=w[t];s.style.opacity="0",s.classList.remove("item_animation")}};Ce(()=>{document.removeEventListener("scroll",b),clearInterval(re),document.removeEventListener("click",R)}),Q(()=>{H()});const j=v(!0),z=v([]),h=v({total:0,page_size:f,current_index:U.page}),H=()=>{switch(U.classification){case"学习笔记":I(i.study,h.value.current_index);break;case"技术分享":I(i.technique,h.value.current_index);break;case"生活随想":I(i.life,h.value.current_index);break;case"二次元":I(i.acg,h.value.current_index);break}ae(),X(()=>{w=Array.from(document.querySelectorAll(".topic_item")),document.addEventListener("scroll",b),b()})},I=(t,s)=>{s*f>=t.length?z.value=t.slice(s*f-f):z.value=t.slice((s-1)*f,(s-1)*f+f),h.value.total=Math.ceil(t.length/f)},N=t=>{g.push(t)},ce=t=>{switch(U.classification){case"学习笔记":g.push("/unknownWorldMap/list/学习笔记/"+t);break;case"技术分享":g.push("/unknownWorldMap/list/技术分享/"+t);break;case"生活随想":g.push("/unknownWorldMap/list/生活随想/"+t);break;case"二次元":g.push("/unknownWorldMap/list/二次元/"+t);break}X(()=>{window.scrollTo(0,0),h.value.current_index=t,H()})};let y=[];(()=>{y.push(i.life[0]),y.push(i.study[0]),y.push(i.technique[0]),y.push(i.acg[0])})();const A=t=>{g.push(`/unknownWorldMap/list/${t}/1`)},O=v(""),Y=t=>{let s=new Date(t),_=new Date().getTime()-s.getTime(),l=Math.floor(_/(24*3600*1e3)),p=_%(24*3600*1e3),m=Math.floor(p/(3600*1e3)),M=p%(3600*1e3),T=Math.floor(M/(60*1e3));O.value=`${l}天${m}小时${T}分钟`},_e=()=>{let a=[E(i.life[0].date),E(i.study[0].date),E(i.technique[0].date),E(i.acg[0].date)].sort((he,me)=>{let L=me.split("-"),$=he.split("-");return new Date(L[0],L[1]-1,L[2],L[3],L[4])-new Date($[0],$[1]-1,$[2],$[3],$[4])})[0].split("-"),_=new Date(a[0],a[1]-1,a[2],a[3],a[4]),p=new Date().getTime()-_.getTime(),m=Math.floor(p/(24*3600*1e3)),M=p%(24*3600*1e3),T=Math.floor(M/(3600*1e3)),pe=M%(3600*1e3),fe=Math.floor(pe/(60*1e3));return m==0&&T<24?T===0?fe+"分钟前":T+"小时前":m+"天前"},E=t=>t.split("?")[0]+"-"+t.split("?")[1]+"-"+t.split("?")[2]+"-"+t.split("?")[3].split(":")[0]+"-"+t.split("?")[3].split(":")[1];let re=setInterval(()=>{Y(le)},6e4);const F={classification_total:4,new_topic:y,site_info:{name:"Tiny Flowers",run_time:O,last_update:_e()}},de=t=>{window.event?t.keyCode:t.which},k=v([]),K=v();Me(K,(t,s)=>{if(t==""){k.value=[],C.value=!1;return}C.value=!0,k.value=[],G(i.get_all(),0,t)});const G=(t,s,a)=>{if(s>t.length-1)return;a.toLowerCase();let _=Math.min(10,t.length-s);window.requestAnimationFrame(()=>{for(let l=0;l<_;l++)t[s+l].title.toLowerCase().indexOf(a)==-1&&t[s+l].tags.toLowerCase().indexOf(a)==-1||k.value.push(t[s+l]);G(t,s+_)})},C=v(!1),ue=()=>{k.value.length!=0&&(C.value=!0)};return(t,s)=>{const a=Z("Pagination"),_=Z("Utils");return r(),d(S,null,[e("div",qe,[e("div",De,[P(e("input",{id:"topic_search",class:"topic_search","onUpdate:modelValue":s[0]||(s[0]=l=>K.value=l),onFocus:ue,onInput:s[1]||(s[1]=(...l)=>t.filter_search_handle&&t.filter_search_handle(...l)),onKeyup:Le(de,["enter"]),type:"text",placeholder:"在此键入搜索"},null,40,Ie),[[Te,K.value]]),Ae,P(e("div",Ee,[e("ul",Fe,[(r(!0),d(S,null,B(k.value,l=>(r(),d("li",{onClick:p=>N(l.link)},o(l.title),9,Be))),256))])],512),[[ee,C.value]])]),e("div",Ue,[e("div",We,[(r(!0),d(S,null,B(z.value,(l,p)=>(r(),d("div",{onClick:m=>N(l.link),class:"topic_item flex flex_direction_column relative"},[e("div",ze,[e("div",null,[e("span",Ke,o(l.title),1)]),e("span",{class:"short_msg",innerHTML:l.short_message},null,8,Pe),e("div",Re,o(u(q).name)+" / "+o(l.date.split("?")[1].replace(/^0+/,""))+"月"+o(l.date.split("?")[2].replace(/^0+/,""))+"日 / "+o(l.date.split("?")[0])+" / "+o(l.date.split("?")[3]),1)]),e("div",Ve,[(r(!0),d(S,null,B(l.tags.split("?"),(m,M)=>(r(),d("span",He,o(m),1))),256))])],8,je))),256)),te(a,{onPage_change:ce,class:"pagination",data:h.value},null,8,["data"])]),P(e("div",Ne,[e("div",Oe,[e("img",{src:u(q).avatar,alt:""},null,8,Ye),e("span",{class:"personal_name",textContent:o(u(q).name)},null,8,Ge),e("span",{class:"personal_signature",textContent:o(u(q).signature)},null,8,Je),e("div",Qe,[e("div",Xe,[Ze,e("span",{textContent:o(u(i).length())},null,8,et)]),e("div",tt,[st,e("span",{textContent:o(F.classification_total)},null,8,lt)])])]),e("div",ot,[nt,e("ul",it,[(r(!0),d(S,null,B(F.new_topic,l=>(r(),d("li",{onClick:p=>t.$router.push(l.link),class:"flex flex_direction_column",key:l.link},[e("span",null,o(l.title),1),e("span",ct,o(l.date.split("?")[0])+"-"+o(l.date.split("?")[1])+"-"+o(l.date.split("?")[2]),1)],8,at))),128))])]),e("div",_t,[rt,e("ul",dt,[e("li",{onClick:s[2]||(s[2]=l=>A(D[0].name)),class:"flex flex_direction_row"},[ut,e("span",null,o(u(i).study.length),1)]),e("li",{onClick:s[3]||(s[3]=l=>A(D[1].name)),class:"flex flex_direction_row"},[pt,e("span",null,o(u(i).technique.length),1)]),e("li",{onClick:s[4]||(s[4]=l=>A(D[2].name)),class:"flex flex_direction_row"},[ft,e("span",null,o(u(i).life.length),1)]),e("li",{onClick:s[5]||(s[5]=l=>A(D[3].name)),class:"flex flex_direction_row"},[ht,e("span",null,o(u(i).acg.length),1)])])]),e("div",mt,[vt,e("ul",xt,[gt,e("li",null,[e("span",null,"存活时间: "+o(F.site_info.run_time.value),1)]),e("li",null,[e("span",null,"上次更新时间: "+o(F.site_info.last_update),1)])])])],512),[[ee,j.value]])]),wt]),te(_)],64)}}},Ct=ve(bt,[["__scopeId","data-v-9cc16c5e"]]);export{Ct as default};
